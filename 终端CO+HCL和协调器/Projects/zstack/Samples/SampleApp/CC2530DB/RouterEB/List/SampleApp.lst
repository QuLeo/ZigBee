###############################################################################
#                                                                             #
# IAR C/C++ Compiler V8.10.3.10338/W32 for 8051         22/Sep/2017  02:37:20 #
# Copyright 2004-2011 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#    Source file        =  C:\Users\Administrator\Desktop\TENZ组播            #
#                          改2\Projects\zstack\Samples\SampleApp\Source\Sampl #
#                          eApp.c                                             #
#    Command line       =  -f "C:\Users\Administrator\Desktop\TENZ组播        #
#                          改2\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\Tools\CC2530DB\f8wRouter.cfg" (-DCPU32MHZ    #
#                          -DROOT=__near_func -DMAC_CFG_APP_PENDING_QUEUE=TRU #
#                          E -DMAC_CFG_TX_DATA_MAX=5 -DMAC_CFG_TX_MAX=8       #
#                          -DMAC_CFG_RX_MAX=5 -DRTR_NWK) -f                   #
#                          "C:\Users\Administrator\Desktop\TENZ组播           #
#                          改2\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\Tools\CC2530DB\f8wConfig.cfg" (-DZIGBEEPRO   #
#                          -DSECURE=0 -DZG_SECURE_DYNAMIC=0 -DREFLECTOR       #
#                          -DDEFAULT_CHANLIST=0x00000800                      #
#                          -DZDAPP_CONFIG_PAN_ID=0xFF00                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DLINK_STATUS_JITTER_MASK=0x007F                   #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116                           #
#                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const     #
#                          __code" -DGENERIC=__generic                        #
#                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000        #
#                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100)   #
#                          -DREJOIN_POLL_RATE=440 "C:\Users\Administrator\Des #
#                          ktop\TENZ组播 改2\Projects\zstack\Samples\SampleAp #
#                          p\Source\SampleApp.c" -D ZTOOL_P1 -D MT_TASK -D    #
#                          MT_SYS_FUNC -D MT_ZDO_FUNC -D                      #
#                          xLCD_SUPPORTED=DEBUG -D HAL_ADC -D                 #
#                          Channel_1_For_TGS813 -lC                           #
#                          "C:\Users\Administrator\Desktop\TENZ组播           #
#                          改2\Projects\zstack\Samples\SampleApp\CC2530DB\Rou #
#                          terEB\List\" -lA "C:\Users\Administrator\Desktop\T #
#                          ENZ组播 改2\Projects\zstack\Samples\SampleApp\CC25 #
#                          30DB\RouterEB\List\" --diag_suppress Pe001,Pa010   #
#                          -o "C:\Users\Administrator\Desktop\TENZ组播        #
#                          改2\Projects\zstack\Samples\SampleApp\CC2530DB\Rou #
#                          terEB\Obj\" -e --no_code_motion --debug            #
#                          --core=plain --dptr=16,1 --data_model=large        #
#                          --code_model=banked --calling_convention=xdata_ree #
#                          ntrant --place_constants=data_rom                  #
#                          --nr_virtual_regs 16 -I "C:\Users\Administrator\De #
#                          sktop\TENZ组播 改2\Projects\zstack\Samples\SampleA #
#                          pp\CC2530DB\" -I "C:\Users\Administrator\Desktop\T #
#                          ENZ组播 改2\Projects\zstack\Samples\SampleApp\CC25 #
#                          30DB\..\Source\" -I "C:\Users\Administrator\Deskto #
#                          p\TENZ组播 改2\Projects\zstack\Samples\SampleApp\C #
#                          C2530DB\..\..\..\ZMain\TI2530DB\" -I               #
#                          "C:\Users\Administrator\Desktop\TENZ组播           #
#                          改2\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\..\..\Components\hal\include\" -I            #
#                          "C:\Users\Administrator\Desktop\TENZ组播           #
#                          改2\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\..\..\Components\hal\target\CC2530EB\" -I    #
#                          "C:\Users\Administrator\Desktop\TENZ组播           #
#                          改2\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\..\..\Components\mac\include\" -I            #
#                          "C:\Users\Administrator\Desktop\TENZ组播           #
#                          改2\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\..\..\Components\mac\high_level\" -I         #
#                          "C:\Users\Administrator\Desktop\TENZ组播           #
#                          改2\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\..\..\Components\mac\low_level\srf04\" -I    #
#                          "C:\Users\Administrator\Desktop\TENZ组播           #
#                          改2\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\..\..\Components\mac\low_level\srf04\single_ #
#                          chip\" -I "C:\Users\Administrator\Desktop\TENZ组播 #
#                           改2\Projects\zstack\Samples\SampleApp\CC2530DB\.. #
#                          \..\..\..\..\Components\mt\" -I                    #
#                          "C:\Users\Administrator\Desktop\TENZ组播           #
#                          改2\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\..\..\Components\osal\include\" -I           #
#                          "C:\Users\Administrator\Desktop\TENZ组播           #
#                          改2\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\..\..\Components\services\saddr\" -I         #
#                          "C:\Users\Administrator\Desktop\TENZ组播           #
#                          改2\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\..\..\Components\services\sdata\" -I         #
#                          "C:\Users\Administrator\Desktop\TENZ组播           #
#                          改2\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\..\..\Components\stack\af\" -I               #
#                          "C:\Users\Administrator\Desktop\TENZ组播           #
#                          改2\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\..\..\Components\stack\nwk\" -I              #
#                          "C:\Users\Administrator\Desktop\TENZ组播           #
#                          改2\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\..\..\Components\stack\sapi\" -I             #
#                          "C:\Users\Administrator\Desktop\TENZ组播           #
#                          改2\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\..\..\Components\stack\sec\" -I              #
#                          "C:\Users\Administrator\Desktop\TENZ组播           #
#                          改2\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\..\..\Components\stack\sys\" -I              #
#                          "C:\Users\Administrator\Desktop\TENZ组播           #
#                          改2\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\..\..\Components\stack\zdo\" -I              #
#                          "C:\Users\Administrator\Desktop\TENZ组播           #
#                          改2\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\..\..\Components\zmac\" -I                   #
#                          "C:\Users\Administrator\Desktop\TENZ组播           #
#                          改2\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\..\..\Components\zmac\f8w\" -Ohz             #
#    List file          =  C:\Users\Administrator\Desktop\TENZ组播            #
#                          改2\Projects\zstack\Samples\SampleApp\CC2530DB\Rou #
#                          terEB\List\SampleApp.lst                           #
#    Object file        =  C:\Users\Administrator\Desktop\TENZ组播            #
#                          改2\Projects\zstack\Samples\SampleApp\CC2530DB\Rou #
#                          terEB\Obj\SampleApp.r51                            #
#                                                                             #
#                                                                             #
###############################################################################

C:\Users\Administrator\Desktop\TENZ组播 改2\Projects\zstack\Samples\SampleApp\Source\SampleApp.c
      1          /**************************************************************************************************
      2            Filename:       SampleApp.c
      3            Revised:        $Date: 2009-03-18 15:56:27 -0700 (Wed, 18 Mar 2009) $
      4            Revision:       $Revision: 19453 $
      5          
      6            Description:    Sample Application (no Profile).
      7          
      8          
      9            Copyright 2007 Texas Instruments Incorporated. All rights reserved.
     10          
     11            IMPORTANT: Your use of this Software is limited to those specific rights
     12            granted under the terms of a software license agreement between the user
     13            who downloaded the software, his/her employer (which must be your employer)
     14            and Texas Instruments Incorporated (the "License").  You may not use this
     15            Software unless you agree to abide by the terms of the License. The License
     16            limits your use, and you acknowledge, that the Software may not be modified,
     17            copied or distributed unless embedded on a Texas Instruments microcontroller
     18            or used solely and exclusively in conjunction with a Texas Instruments radio
     19            frequency transceiver, which is integrated into your product.  Other than for
     20            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     21            works of, modify, distribute, perform, display or sell this Software and/or
     22            its documentation for any purpose.
     23          
     24            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     25            PROVIDED AS IS?WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
     26            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
     27            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     28            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     29            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     30            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     31            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     32            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     33            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     34            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     35          
     36            Should you have any questions regarding your right to use this Software,
     37            contact Texas Instruments Incorporated at www.TI.com.
     38          **************************************************************************************************/
     39          
     40          /*********************************************************************
     41            This application isn't intended to do anything useful, it is
     42            intended to be a simple example of an application's structure.
     43          
     44            This application sends it's messages either as broadcast or
     45            broadcast filtered group messages.  The other (more normal)
     46            message addressing is unicast.  Most of the other sample
     47            applications are written to support the unicast message model.
     48          
     49            Key control:
     50              SW1:  Sends a flash command to all devices in Group 1.
     51              SW2:  Adds/Removes (toggles) this device in and out
     52                    of Group 1.  This will enable and disable the
     53                    reception of the flash command.
     54          *********************************************************************/
     55          
     56          /*********************************************************************
     57           * INCLUDES
     58           */
     59          #include "OSAL.h"
     60          #include "ZGlobals.h"
     61          #include "AF.h"
     62          #include "aps_groups.h"
     63          #include "ZDApp.h"
     64          
     65          #include "SampleApp.h"
     66          #include "SampleAppHw.h"
     67          
     68          #include "OnBoard.h"

   \                                 In  segment SFR_AN, at 0x90
   \   union <unnamed> volatile __sfr _A_P1
   \                     _A_P1:
   \   000000                DS 1
     69          
     70          /* HAL */
     71          #include "hal_lcd.h"
     72          #include "hal_led.h"
     73          #include "hal_key.h"
     74          #include "hal_adc.h"
     75          //此处用于串口
     76          #include  "MT_UART.h"
     77          //温湿度传感器
     78          #include "dht11.h"
     79          //C语言标准库
     80          #include <string.h>
     81          #include <stdio.h>
     82          //GasSensor 获取数据的头文件
     83          #include "TGS813.h"
     84          #include "TGS822.h"
     85          
     86          //CO
     87          #include <CO.h>
     88          
     89          //PM2.5
     90          #include <PM25.h>
     91          /*********************************************************************
     92           * MACROS
     93           */
     94          
     95          
     96          #define AMS1117_3_ADC_VOL     3.28   //宏定义AMS1117 3.3 ADC参考电压，该值可能在3.2-3.4浮动
     97          //如果定义了channel0或者channel1给气体传感器，则
     98          #if (defined Channel_0_For_TGS813) || (defined Channel_0_For_TGS822)
     99          #define Channel_0_GasSensor_Busy
    100          #endif
    101          #if (defined Channel_1_For_TGS813) || (defined Channel_1_For_TGS822)
    102          #define Channel_1_GasSensor_Busy
    103          #endif
    104          //如果多个气体传感器同时占用同一个channel，则提示
    105          #if (defined Channel_0_For_TGS813) && (defined Channel_0_For_TGS822)
    106          #error "Channel0 is just for one gas sensor.Check the micro!"
    107          #endif
    108          #if (defined Channel_1_For_TGS813) && (defined Channel_1_For_TGS822)
    109          #error "Channel1 is just for one gas sensor.Check the micro!"
    110          
    111          #endif
    112          #if (!defined Channel_0_GasSensor_Busy) && (!defined Channel_1_GasSensor_Busy)
    113          #warning "Do you want to use the Gas Sensor? if yes,please define it,if not please ignore this message."
    114          #endif
    115          
    116          // 设置不同传感器电压阈值
    117          // TGS813
    118          #define TGS813_Safe 0.8
    119          #define TGS813_Mildly 1.2
    120          #define TGS813_Moderate 1.8
    121          #define TGS813_Severe 2.3
    122          // TGS822
    123          #define TGS822_Safe 0.8
    124          #define TGS822_Mildly 1.2
    125          #define TGS822_Moderate 1.8
    126          #define TGS822_Severe 2.3
    127          
    128          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    129          char contin=0;
   \                     contin:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    130          extern uint8 PM_data[6];
    131          /*********************************************************************
    132           * CONSTANTS
    133           */
    134          
    135          /*********************************************************************
    136           * TYPEDEFS
    137           */
    138          
    139          /*********************************************************************
    140           * GLOBAL VARIABLES
    141           */
    142          
    143          // This list should be filled with Application specific Cluster IDs.

   \                                 In  segment XDATA_ROM_C, align 1
    144          const cId_t SampleApp_ClusterList[SAMPLEAPP_MAX_CLUSTERS] =
   \                     SampleApp_ClusterList:
   \   000000   0100         DW 1
   \   000002   0200         DW 2
   \   000004   0000         DW 0
    145          {
    146            SAMPLEAPP_PERIODIC_CLUSTERID,
    147            SAMPLEAPP_FLASH_CLUSTERID
    148          };
    149          

   \                                 In  segment XDATA_ROM_C, align 1
    150          const SimpleDescriptionFormat_t SampleApp_SimpleDesc =
   \                     SampleApp_SimpleDesc:
   \   000000   14           DB 20
   \   000001   080F         DW 3848
   \   000003   0100         DW 1
   \   000005   00           DB 0
   \   000006   03           DB 3
   \   000007   ....         DW SampleApp_ClusterList
   \   000009   03           DB 3
   \   00000A   ....         DW SampleApp_ClusterList
    151          {
    152            SAMPLEAPP_ENDPOINT,              //  int Endpoint;
    153            SAMPLEAPP_PROFID,                //  uint16 AppProfId[2];
    154            SAMPLEAPP_DEVICEID,              //  uint16 AppDeviceId[2];
    155            SAMPLEAPP_DEVICE_VERSION,        //  int   AppDevVer:4;
    156            SAMPLEAPP_FLAGS,                 //  int   AppFlags:4;
    157            SAMPLEAPP_MAX_CLUSTERS,          //  uint8  AppNumInClusters;
    158            (cId_t *)SampleApp_ClusterList,  //  uint8 *pAppInClusterList;
    159            SAMPLEAPP_MAX_CLUSTERS,          //  uint8  AppNumInClusters;
    160            (cId_t *)SampleApp_ClusterList   //  uint8 *pAppInClusterList;
    161          };
    162          
    163          // This is the Endpoint/Interface description.  It is defined here, but
    164          // filled-in in SampleApp_Init().  Another way to go would be to fill
    165          // in the structure here and make it a "const" (in code space).  The
    166          // way it's defined in this sample app it is define in RAM.

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    167          endPointDesc_t SampleApp_epDesc;
   \                     SampleApp_epDesc:
   \   000000                DS 6
   \   000006                REQUIRE __INIT_XDATA_Z
    168          
    169          /*********************************************************************
    170           * EXTERNAL VARIABLES
    171           */
    172          
    173          /*********************************************************************
    174           * EXTERNAL FUNCTIONS
    175           */
    176          
    177          /*********************************************************************
    178           * LOCAL VARIABLES
    179           */

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    180          uint8 SampleApp_TaskID;   // Task ID for internal task/event processing
   \                     SampleApp_TaskID:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    181                                    // This variable will be received when
    182                                    // SampleApp_Init() is called.

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    183          devStates_t SampleApp_NwkState;
   \                     SampleApp_NwkState:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    184          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    185          uint8 SampleApp_TransID;  // This is the unique message ID (counter)
   \                     SampleApp_TransID:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    186          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    187          afAddrType_t SampleApp_Periodic_DstAddr;
   \                     SampleApp_Periodic_DstAddr:
   \   000000                DS 12
   \   00000C                REQUIRE __INIT_XDATA_Z
    188          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    189          afAddrType_t SampleApp_Flash_DstAddr;//组播
   \                     SampleApp_Flash_DstAddr:
   \   000000                DS 12
   \   00000C                REQUIRE __INIT_XDATA_Z
    190          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    191          afAddrType_t SampleApp_Point_To_Point_DstAddr;
   \                     SampleApp_Point_To_Point_DstAddr:
   \   000000                DS 12
   \   00000C                REQUIRE __INIT_XDATA_Z
    192          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    193          aps_Group_t SampleApp_Group;//分组内容
   \                     SampleApp_Group:
   \   000000                DS 18
   \   000012                REQUIRE __INIT_XDATA_Z
    194          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    195          uint8 SampleAppPeriodicCounter = 0;
   \                     SampleAppPeriodicCounter:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    196          uint8 SampleAppFlashCounter = 0;
   \                     SampleAppFlashCounter:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    197          
    198          
    199          //@huang
    200          //设置channel0和channel1获取气体浓度指向的函数
    201          #if (defined Channel_0_For_TGS813)
    202          int (*PointGetConcentrationForChannel_0)(float ,char ,unsigned char ) = TGS813GetConcentration;
    203          uint8 *GasSensorFlagForChannel_0 = &TGS813GasSen_Flag;
    204          #elif ((defined Channel_1_For_TGS813))

   \                                 In  segment XDATA_I, align 1, keep-with-next
    205          int (*PointGetConcentrationForChannel_1)(float ,char ,unsigned char ) = TGS813GetConcentration;
   \                     PointGetConcentrationForChannel_1:
   \   000000                DS 2
   \   000002                REQUIRE `?<Initializer for PointGetConcentrationForChan`
   \   000002                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
    206          uint8 *GasSensorFlagForChannel_1 = &TGS813GasSen_Flag;
   \                     GasSensorFlagForChannel_1:
   \   000000                DS 2
   \   000002                REQUIRE `?<Initializer for GasSensorFlagForChannel_1>`
   \   000002                REQUIRE __INIT_XDATA_I
    207          #endif
    208          #if (defined Channel_0_For_TGS822)
    209          int (*PointGetConcentrationForChannel_0)(float ,char ,unsigned char ) = TGS822GetConcentration;
    210          uint8 *GasSensorFlagForChannel_0 = &TGS822GasSen_Flag;
    211          #elif (defined Channel_1_For_TGS822)
    212          int (*PointGetConcentrationForChannel_1)(float ,char ,unsigned char ) = TGS822GetConcentration;
    213          uint8 *GasSensorFlagForChannel_1 = &TGS822GasSen_Flag;
    214          #endif
    215          
    216          
    217          /*********************************************************************
    218           * LOCAL FUNCTIONS
    219           */
    220          void SampleApp_HandleKeys( uint8 shift, uint8 keys );
    221          void SampleApp_MessageMSGCB( afIncomingMSGPacket_t *pckt );
    222          void SampleApp_SendPeriodicMessage( void );
    223          void SampleApp_SendFlashMessage( uint16 flashTime );
    224          void SampleApp_SendPointMessage( void );
    225          
    226          //@huang
    227          void SampleAPP_SendGasSensorMessage(void);//自己定义的数据发送函数
    228          void GetChannel1ADC(void);
    229          void GetChannel2ADC(void);
    230          /*********************************************************************
    231           * NETWORK LAYER CALLBACKS
    232           */
    233          
    234          /*********************************************************************
    235           * PUBLIC FUNCTIONS
    236           */
    237          
    238          /*********************************************************************
    239           * @fn      SampleApp_Init
    240           *
    241           * @brief   Initialization function for the Generic App Task.
    242           *          This is called during initialization and should contain
    243           *          any application specific initialization (ie. hardware
    244           *          initialization/setup, table initialization, power up
    245           *          notificaiton ... ).
    246           *
    247           * @param   task_id - the ID assigned by OSAL.  This ID should be
    248           *                    used to send messages and set timers.
    249           *
    250           * @return  none
    251           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    252          void SampleApp_Init( uint8 task_id )
   \                     SampleApp_Init:
    253          {
   \   000000   74F5         MOV     A,#-0xb
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 11
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   FE           MOV     R6,A
    254            SampleApp_TaskID = task_id;
   \   000007   90....       MOV     DPTR,#SampleApp_TaskID
   \   00000A   F0           MOVX    @DPTR,A
    255            SampleApp_NwkState = DEV_INIT;
   \   00000B   90....       MOV     DPTR,#SampleApp_NwkState
   \   00000E   7401         MOV     A,#0x1
   \   000010   F0           MOVX    @DPTR,A
    256            SampleApp_TransID = 0;
   \   000011   90....       MOV     DPTR,#SampleApp_TransID
   \   000014   E4           CLR     A
   \   000015   F0           MOVX    @DPTR,A
    257          
    258            MT_UartInit();                //串口初始化
   \   000016                ; Setup parameters for call to function MT_UartInit
   \   000016   12....       LCALL   ??MT_UartInit?relay
    259            MT_UartRegisterTaskID(task_id);//登记任务号
   \   000019                ; Setup parameters for call to function MT_UartRegisterTaskID
   \   000019   EE           MOV     A,R6
   \   00001A   F9           MOV     R1,A
   \   00001B   12....       LCALL   ??MT_UartRegisterTaskID?relay
    260            HalUARTWrite(0,"Hello World\n",12); //（串口0，'字符'，字符个数。）
   \   00001E                ; Setup parameters for call to function HalUARTWrite
   \   00001E   7C0C         MOV     R4,#0xc
   \   000020   7D00         MOV     R5,#0x0
   \   000022   7A..         MOV     R2,#`?<Constant "Hello World\\n">` & 0xff
   \   000024   7B..         MOV     R3,#(`?<Constant "Hello World\\n">` >> 8) & 0xff
   \   000026   7900         MOV     R1,#0x0
   \   000028   12....       LCALL   ??HalUARTWrite?relay
    261          
    262            HalAdcInit();                 //ADC参考电压初始化（默认为内部参考电压）
   \   00002B                ; Setup parameters for call to function HalAdcInit
   \   00002B   12....       LCALL   ??HalAdcInit?relay
    263            // Device hardware initialization can be added here or in main() (Zmain.c).
    264            // If the hardware is application specific - add it here.
    265            // If the hardware is other parts of the device add it in main().
    266          
    267           #if defined ( BUILD_ALL_DEVICES )
    268            // The "Demo" target is setup to have BUILD_ALL_DEVICES and HOLD_AUTO_START
    269            // We are looking at a jumper (defined in SampleAppHw.c) to be jumpered
    270            // together - if they are - we will start up a coordinator. Otherwise,
    271            // the device will start as a router.
    272            if ( readCoordinatorJumper() )
    273              zgDeviceLogicalType = ZG_DEVICETYPE_COORDINATOR;
    274            else
    275              zgDeviceLogicalType = ZG_DEVICETYPE_ROUTER;
    276          #endif // BUILD_ALL_DEVICES
    277          
    278          #if defined ( HOLD_AUTO_START )
    279            // HOLD_AUTO_START is a compile option that will surpress ZDApp
    280            //  from starting the device and wait for the application to
    281            //  start the device.
    282            ZDOInitDevice(0);
    283          #endif
    284          
    285            // Setup for the periodic message's destination address
    286            // Broadcast to everyone
    287            SampleApp_Periodic_DstAddr.addrMode = (afAddrMode_t)AddrBroadcast;
   \   00002E   90....       MOV     DPTR,#SampleApp_Periodic_DstAddr + 8
   \   000031   740F         MOV     A,#0xf
   \   000033   F0           MOVX    @DPTR,A
    288            SampleApp_Periodic_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
   \   000034   A3           INC     DPTR
   \   000035   7414         MOV     A,#0x14
   \   000037   F0           MOVX    @DPTR,A
    289            SampleApp_Periodic_DstAddr.addr.shortAddr = 0xFFFF;
   \   000038   90....       MOV     DPTR,#SampleApp_Periodic_DstAddr
   \   00003B   74FF         MOV     A,#-0x1
   \   00003D   F0           MOVX    @DPTR,A
   \   00003E   A3           INC     DPTR
   \   00003F   F0           MOVX    @DPTR,A
    290          
    291            // Setup for the flash command's destination address - Group 1 //组播设置
    292            SampleApp_Flash_DstAddr.addrMode = (afAddrMode_t)afAddrGroup;
   \   000040   90....       MOV     DPTR,#SampleApp_Flash_DstAddr + 8
   \   000043   7401         MOV     A,#0x1
   \   000045   F0           MOVX    @DPTR,A
    293            SampleApp_Flash_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
   \   000046   A3           INC     DPTR
   \   000047   7414         MOV     A,#0x14
   \   000049   F0           MOVX    @DPTR,A
    294            SampleApp_Flash_DstAddr.addr.shortAddr = SAMPLEAPP_FLASH_GROUP;//组播号
   \   00004A   90....       MOV     DPTR,#SampleApp_Flash_DstAddr
   \   00004D   7401         MOV     A,#0x1
   \   00004F   F0           MOVX    @DPTR,A
   \   000050   A3           INC     DPTR
   \   000051   E4           CLR     A
   \   000052   F0           MOVX    @DPTR,A
    295            //点播结构体的初始化
    296             // Setup for the point command's destination address
    297            SampleApp_Point_To_Point_DstAddr.addrMode = (afAddrMode_t)Addr16Bit; //点播
   \   000053   90....       MOV     DPTR,#SampleApp_Point_To_Point_DstAddr + 8
   \   000056   7402         MOV     A,#0x2
   \   000058   F0           MOVX    @DPTR,A
    298            SampleApp_Point_To_Point_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
   \   000059   A3           INC     DPTR
   \   00005A   7414         MOV     A,#0x14
   \   00005C   F0           MOVX    @DPTR,A
    299            SampleApp_Point_To_Point_DstAddr.addr.shortAddr = 0x0000;           //0x0000 默认是协调器的地址
   \   00005D   90....       MOV     DPTR,#SampleApp_Point_To_Point_DstAddr
   \   000060   E4           CLR     A
   \   000061   F0           MOVX    @DPTR,A
   \   000062   A3           INC     DPTR
   \   000063   F0           MOVX    @DPTR,A
    300            // Fill out the endpoint description.
    301            SampleApp_epDesc.endPoint = SAMPLEAPP_ENDPOINT;
   \   000064   90....       MOV     DPTR,#SampleApp_epDesc
   \   000067   7414         MOV     A,#0x14
   \   000069   F0           MOVX    @DPTR,A
    302            SampleApp_epDesc.task_id = &SampleApp_TaskID;
   \   00006A   A3           INC     DPTR
   \   00006B   74..         MOV     A,#SampleApp_TaskID & 0xff
   \   00006D   F0           MOVX    @DPTR,A
   \   00006E   A3           INC     DPTR
   \   00006F   74..         MOV     A,#(SampleApp_TaskID >> 8) & 0xff
   \   000071   F0           MOVX    @DPTR,A
    303            SampleApp_epDesc.simpleDesc
    304                      = (SimpleDescriptionFormat_t *)&SampleApp_SimpleDesc;
   \   000072   A3           INC     DPTR
   \   000073   74..         MOV     A,#SampleApp_SimpleDesc & 0xff
   \   000075   F0           MOVX    @DPTR,A
   \   000076   A3           INC     DPTR
   \   000077   74..         MOV     A,#(SampleApp_SimpleDesc >> 8) & 0xff
   \   000079   F0           MOVX    @DPTR,A
    305            SampleApp_epDesc.latencyReq = noLatencyReqs;
   \   00007A   A3           INC     DPTR
   \   00007B   E4           CLR     A
   \   00007C   F0           MOVX    @DPTR,A
    306          
    307            // Register the endpoint description with the AF
    308            afRegister( &SampleApp_epDesc );
   \   00007D                ; Setup parameters for call to function afRegister
   \   00007D   7A..         MOV     R2,#SampleApp_epDesc & 0xff
   \   00007F   7B..         MOV     R3,#(SampleApp_epDesc >> 8) & 0xff
   \   000081   12....       LCALL   ??afRegister?relay
    309          
    310            // Register for all key events - This app will handle all key events
    311            RegisterForKeys( SampleApp_TaskID );
   \   000084                ; Setup parameters for call to function RegisterForKeys
   \   000084   90....       MOV     DPTR,#SampleApp_TaskID
   \   000087   E0           MOVX    A,@DPTR
   \   000088   F9           MOV     R1,A
   \   000089   12....       LCALL   ??RegisterForKeys?relay
    312          
    313            // By default, all devices start out in Group 1
    314            SampleApp_Group.ID = 0x0001;
   \   00008C   90....       MOV     DPTR,#SampleApp_Group
   \   00008F   7401         MOV     A,#0x1
   \   000091   F0           MOVX    @DPTR,A
   \   000092   A3           INC     DPTR
   \   000093   E4           CLR     A
   \   000094   F0           MOVX    @DPTR,A
    315            osal_memcpy( SampleApp_Group.name, "Group 1", 7  );
   \   000095                ; Setup parameters for call to function osal_memcpy
   \   000095   75....       MOV     ?V0 + 0,#`?<Constant "Group 1">` & 0xff
   \   000098   75....       MOV     ?V0 + 1,#(`?<Constant "Group 1">` >> 8) & 0xff
   \   00009B   F5..         MOV     ?V0 + 2,A
   \   00009D   78..         MOV     R0,#?V0 + 0
   \   00009F   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   0000A2   7C07         MOV     R4,#0x7
   \   0000A4   7D00         MOV     R5,#0x0
   \   0000A6   7A..         MOV     R2,#(SampleApp_Group + 2) & 0xff
   \   0000A8   7B..         MOV     R3,#((SampleApp_Group + 2) >> 8) & 0xff
   \   0000AA   12....       LCALL   ??osal_memcpy?relay
   \   0000AD   7403         MOV     A,#0x3
   \   0000AF   12....       LCALL   ?DEALLOC_XSTACK8
    316            aps_AddGroup( SAMPLEAPP_ENDPOINT, &SampleApp_Group );
   \   0000B2                ; Setup parameters for call to function aps_AddGroup
   \   0000B2   7A..         MOV     R2,#SampleApp_Group & 0xff
   \   0000B4   7B..         MOV     R3,#(SampleApp_Group >> 8) & 0xff
   \   0000B6   7914         MOV     R1,#0x14
   \   0000B8   12....       LCALL   ??aps_AddGroup?relay
    317          
    318          #if defined ( LCD_SUPPORTED )
    319            HalLcdWriteString( "SampleApp", HAL_LCD_LINE_1 );
    320          #endif
    321          
    322            //如果没有使用PA，则亮灯（或者其他），如果使用了PA，则...
    323          #if defined (HAL_PA_LNA)
    324            HAL_TURN_ON_LED2();
   \   0000BB   C291         CLR     0x90.1
    325          #endif
    326          }
   \   0000BD   7F03         MOV     R7,#0x3
   \   0000BF   02....       LJMP    ?BANKED_LEAVE_XDATA
   \   0000C2                REQUIRE _A_P1
    327          
    328          /*********************************************************************
    329           * @fn      SampleApp_ProcessEvent
    330           *
    331           * @brief   Generic Application Task event processor.  This function
    332           *          is called to process all events for the task.  Events
    333           *          include timers, messages and any other user defined events.
    334           *
    335           * @param   task_id  - The OSAL assigned task ID.
    336           * @param   events - events to process.  This is a bit map and can
    337           *                   contain more than one event.
    338           *
    339           * @return  none
    340           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    341          uint16 SampleApp_ProcessEvent( uint8 task_id, uint16 events )
   \                     SampleApp_ProcessEvent:
    342          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
    343            afIncomingMSGPacket_t *MSGpkt;
    344            (void)task_id;  // Intentionally unreferenced parameter
    345          
    346            if ( events & SYS_EVENT_MSG )
   \   000009   5480         ANL     A,#0x80
   \   00000B   6074         JZ      ??SampleApp_ProcessEvent_0
    347            {
    348              MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( SampleApp_TaskID );
   \   00000D                ; Setup parameters for call to function osal_msg_receive
   \   00000D   8026         SJMP    ??SampleApp_ProcessEvent_1
    349              while ( MSGpkt )
    350              {
    351                switch ( MSGpkt->hdr.event )
    352                {
    353                  // Received when a key is pressed
    354                  case KEY_CHANGE:
    355                    SampleApp_HandleKeys( ((keyChange_t *)MSGpkt)->state, ((keyChange_t *)MSGpkt)->keys );
    356                    break;
    357          
    358                  // Received when a messages is received (OTA) for this endpoint
    359                  case AF_INCOMING_MSG_CMD:
    360                    SampleApp_MessageMSGCB( MSGpkt );
    361                      //工作指示灯
    362                     //HAL_TOGGLE_LED2();
    363                    break;
    364          
    365                  // Received whenever the device changes state in the network
    366                  case ZDO_STATE_CHANGE:
    367                    SampleApp_NwkState = (devStates_t)(MSGpkt->hdr.status);
   \                     ??SampleApp_ProcessEvent_2:
   \   00000F   A3           INC     DPTR
   \   000010   E0           MOVX    A,@DPTR
   \   000011   90....       MOV     DPTR,#SampleApp_NwkState
   \   000014   F0           MOVX    @DPTR,A
    368                    if ( //(SampleApp_NwkState == DEV_ZB_COORD)||       //协调器不允许对自己点播，只允许路由器和终端对协调器点播
    369                        (SampleApp_NwkState == DEV_ROUTER)
    370                        || (SampleApp_NwkState == DEV_END_DEVICE) )
   \   000015   6407         XRL     A,#0x7
   \   000017   6005         JZ      ??SampleApp_ProcessEvent_3
   \   000019   E0           MOVX    A,@DPTR
   \   00001A   6406         XRL     A,#0x6
   \   00001C   7010         JNZ     ??SampleApp_ProcessEvent_4
    371                    {
    372                      // Start sending the periodic message in a regular interval.
    373                      osal_start_timerEx( SampleApp_TaskID,                    //该函数定时触发事件
    374                                        SAMPLEAPP_SEND_PERIODIC_MSG_EVT,        //参数依次是“任务ID”
    375                                        SAMPLEAPP_SEND_PERIODIC_MSG_TIMEOUT );  //“注册事件”“循环时间”
   \                     ??SampleApp_ProcessEvent_3:
   \   00001E                ; Setup parameters for call to function osal_start_timerEx
   \   00001E   7CE8         MOV     R4,#-0x18
   \   000020   7D03         MOV     R5,#0x3
   \   000022   7A01         MOV     R2,#0x1
   \   000024   7B00         MOV     R3,#0x0
   \   000026   90....       MOV     DPTR,#SampleApp_TaskID
   \   000029   E0           MOVX    A,@DPTR
   \   00002A   F9           MOV     R1,A
   \   00002B   12....       LCALL   ??osal_start_timerEx?relay
    376                    }
    377                    else
    378                    {
    379                      // Device is no longer in the network
    380                    }
    381                    break;
    382          
    383                  default:
    384                    break;
    385                }
    386          
    387                // Release the memory
    388                osal_msg_deallocate( (uint8 *)MSGpkt );
   \                     ??SampleApp_ProcessEvent_4:
   \   00002E                ; Setup parameters for call to function osal_msg_deallocate
   \   00002E   AA..         MOV     R2,?V0 + 0
   \   000030   AB..         MOV     R3,?V0 + 1
   \   000032   12....       LCALL   ??osal_msg_deallocate?relay
    389          
    390                // Next - if one is available
    391                MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( SampleApp_TaskID );
   \   000035                ; Setup parameters for call to function osal_msg_receive
   \                     ??SampleApp_ProcessEvent_1:
   \   000035   90....       MOV     DPTR,#SampleApp_TaskID
   \   000038   E0           MOVX    A,@DPTR
   \   000039   F9           MOV     R1,A
   \   00003A   12....       LCALL   ??osal_msg_receive?relay
   \   00003D   8A..         MOV     ?V0 + 0,R2
   \   00003F   8B..         MOV     ?V0 + 1,R3
   \   000041   E5..         MOV     A,?V0 + 0
   \   000043   45..         ORL     A,?V0 + 1
   \   000045   6032         JZ      ??SampleApp_ProcessEvent_5
   \   000047   85..82       MOV     DPL,?V0 + 0
   \   00004A   85..83       MOV     DPH,?V0 + 1
   \   00004D   E0           MOVX    A,@DPTR
   \   00004E   24E6         ADD     A,#-0x1a
   \   000050   601E         JZ      ??SampleApp_ProcessEvent_6
   \   000052   245A         ADD     A,#0x5a
   \   000054   6006         JZ      ??SampleApp_ProcessEvent_7
   \   000056   24EF         ADD     A,#-0x11
   \   000058   60B5         JZ      ??SampleApp_ProcessEvent_2
   \   00005A   80D2         SJMP    ??SampleApp_ProcessEvent_4
   \                     ??SampleApp_ProcessEvent_7:
   \   00005C                ; Setup parameters for call to function SampleApp_HandleKeys
   \   00005C   A3           INC     DPTR
   \   00005D   A3           INC     DPTR
   \   00005E   A3           INC     DPTR
   \   00005F   E0           MOVX    A,@DPTR
   \   000060   FA           MOV     R2,A
   \   000061   85..82       MOV     DPL,?V0 + 0
   \   000064   85..83       MOV     DPH,?V0 + 1
   \   000067   A3           INC     DPTR
   \   000068   A3           INC     DPTR
   \   000069   E0           MOVX    A,@DPTR
   \   00006A   F9           MOV     R1,A
   \   00006B   12....       LCALL   ??SampleApp_HandleKeys?relay
   \   00006E   80BE         SJMP    ??SampleApp_ProcessEvent_4
   \                     ??SampleApp_ProcessEvent_6:
   \   000070                ; Setup parameters for call to function SampleApp_MessageMSGCB
   \   000070   AA..         MOV     R2,?V0 + 0
   \   000072   AB..         MOV     R3,?V0 + 1
   \   000074   12....       LCALL   ??SampleApp_MessageMSGCB?relay
   \   000077   80B5         SJMP    ??SampleApp_ProcessEvent_4
    392              }
    393          
    394              // return unprocessed events
    395              return (events ^ SYS_EVENT_MSG);                        //返回没有处理的事件
   \                     ??SampleApp_ProcessEvent_5:
   \   000079   EE           MOV     A,R6
   \   00007A   FA           MOV     R2,A
   \   00007B   EF           MOV     A,R7
   \   00007C   6480         XRL     A,#0x80
   \                     ??SampleApp_ProcessEvent_8:
   \   00007E   FB           MOV     R3,A
   \   00007F   802A         SJMP    ??SampleApp_ProcessEvent_9
    396            }
    397          
    398            // Send a message out - This event is generated by a timer
    399            //  (setup in SampleApp_Init()).
    400            if ( events & SAMPLEAPP_SEND_PERIODIC_MSG_EVT )
   \                     ??SampleApp_ProcessEvent_0:
   \   000081   EE           MOV     A,R6
   \   000082   A2E0         MOV     C,0xE0 /* A   */.0
   \   000084   5021         JNC     ??SampleApp_ProcessEvent_10
    401            {
    402              // Send the periodic message
    403             // SampleApp_SendPeriodicMessage();
    404               SampleAPP_SendGasSensorMessage();      //发送传感器数据的函数
   \   000086                ; Setup parameters for call to function SampleAPP_SendGasSensorMessage
   \   000086   12....       LCALL   ??SampleAPP_SendGasSensorMessage?relay
    405          //     GetChannel1ADC();
    406          //     GetChannel2ADC();
    407              // Setup to send message again in normal period (+ a little jitter)
    408              osal_start_timerEx( SampleApp_TaskID, SAMPLEAPP_SEND_PERIODIC_MSG_EVT,
    409                  (SAMPLEAPP_SEND_PERIODIC_MSG_TIMEOUT + (osal_rand() & 0x00FF)) );
   \   000089                ; Setup parameters for call to function osal_rand
   \   000089   12....       LCALL   ??osal_rand?relay
   \   00008C                ; Setup parameters for call to function osal_start_timerEx
   \   00008C   EA           MOV     A,R2
   \   00008D   24E8         ADD     A,#-0x18
   \   00008F   FC           MOV     R4,A
   \   000090   E4           CLR     A
   \   000091   3403         ADDC    A,#0x3
   \   000093   FD           MOV     R5,A
   \   000094   7A01         MOV     R2,#0x1
   \   000096   7B00         MOV     R3,#0x0
   \   000098   90....       MOV     DPTR,#SampleApp_TaskID
   \   00009B   E0           MOVX    A,@DPTR
   \   00009C   F9           MOV     R1,A
   \   00009D   12....       LCALL   ??osal_start_timerEx?relay
    410          
    411              // return unprocessed events
    412              return (events ^ SAMPLEAPP_SEND_PERIODIC_MSG_EVT);
   \   0000A0   EE           MOV     A,R6
   \   0000A1   6401         XRL     A,#0x1
   \   0000A3   FA           MOV     R2,A
   \   0000A4   EF           MOV     A,R7
   \   0000A5   80D7         SJMP    ??SampleApp_ProcessEvent_8
    413            }
    414          
    415            // Discard unknown events
    416            return 0;
   \                     ??SampleApp_ProcessEvent_10:
   \   0000A7   7A00         MOV     R2,#0x0
   \   0000A9   7B00         MOV     R3,#0x0
   \                     ??SampleApp_ProcessEvent_9:
   \   0000AB   7F04         MOV     R7,#0x4
   \   0000AD   02....       LJMP    ?BANKED_LEAVE_XDATA
    417          }
    418          
    419          
    420          //@huang

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    421          void GetChannel1ADC(void)
   \                     GetChannel1ADC:
    422          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 25
   \   000005   74E7         MOV     A,#-0x19
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    423            uint16 ADC_RegData;
    424            uint8 ADC_Result_RAW[15];
    425            uint8 ADC_Result_ASCII[25];
    426            float ADC_Vol=0;
    427            uint8 i=0;
    428          
    429              //多次读出ADC的值，然后取平均值
    430            ADC_RegData = HalAdcRead(HAL_ADC_CHANNEL_4,HAL_ADC_RESOLUTION_14);   //选择P0_4,14位分辨率，13位有效数据
   \   00000A                ; Setup parameters for call to function HalAdcRead
   \   00000A   12....       LCALL   ?Subroutine10 & 0xFFFF
    431            for(i=0;i<10;i++)
    432            {
    433              ADC_RegData += HalAdcRead(HAL_ADC_CHANNEL_4,HAL_ADC_RESOLUTION_14);  //选择P0_4,14位分辨率,13位有效数据
    434              ADC_RegData >>=1;                                                    //除以2
   \                     ??CrossCallReturnLabel_42:
   \   00000D                ; Setup parameters for call to function HalAdcRead
   \   00000D   12....       LCALL   ?Subroutine9 & 0xFFFF
    435            }
   \                     ??CrossCallReturnLabel_45:
   \   000010   70FB         JNZ     ??CrossCallReturnLabel_42
    436           //ADC_Vol =  (float)ADC_RegData*3.3/8192 + GasSen_Wire_Compensation;     //获取电压值并补偿  补偿导线压降
    437            ADC_Vol = (float)ADC_RegData*3.4/8192;
    438            sprintf(ADC_Result_ASCII,"P0.4:%.4fV",ADC_Vol);                         //将电压值转换为ASCII
                           ^
Warning[Pe167]: argument of type "unsigned char *" is incompatible with
          parameter of type "char *"
   \   000012                ; Setup parameters for call to function sprintf
   \   000012   8E..         MOV     ?V0 + 0,R6
   \   000014   8F..         MOV     ?V0 + 1,R7
   \   000016   E4           CLR     A
   \   000017   F5..         MOV     ?V0 + 2,A
   \   000019   F5..         MOV     ?V0 + 3,A
   \   00001B   78..         MOV     R0,#?V0 + 0
   \   00001D   12....       LCALL   ?UL_TO_FLT
   \   000020   90....       MOV     DPTR,#__Constant_4059999a
   \   000023   78..         MOV     R0,#?V0 + 4
   \   000025   12....       LCALL   ?L_MOV_X
   \   000028   78..         MOV     R0,#?V0 + 0
   \   00002A   79..         MOV     R1,#?V0 + 4
   \   00002C   12....       LCALL   ?FLT_MUL
   \   00002F   90....       MOV     DPTR,#__Constant_39000000
   \   000032   78..         MOV     R0,#?V0 + 4
   \   000034   12....       LCALL   ?L_MOV_X
   \   000037   78..         MOV     R0,#?V0 + 0
   \   000039   79..         MOV     R1,#?V0 + 4
   \   00003B   12....       LCALL   ?FLT_MUL
   \   00003E   78..         MOV     R0,#?V0 + 0
   \   000040   12....       LCALL   ?PUSH_XSTACK_I_FOUR
   \   000043   7C..         MOV     R4,#`?<Constant "P0.4:%.4fV">` & 0xff
   \   000045   7D..         MOV     R5,#(`?<Constant "P0.4:%.4fV">` >> 8) & 0xff
   \   000047                REQUIRE ?Subroutine0
   \   000047                ; // Fall through to label ?Subroutine0
    439            HalUARTWrite(0,ADC_Result_ASCII,strlen(ADC_Result_ASCII));             //将电压值打印出来
                                                          ^
Warning[Pe167]: argument of type "unsigned char *" is incompatible with
          parameter of type "char const *"

    uint8 ADC_Result_RAW[15];
          ^
"C:\Users\Administrator\Desktop\TENZ组播 改2\Projects\zstack\Samples\SampleApp\Source\SampleApp.c",424  Warning[Pe177]: 
          variable "ADC_Result_RAW" was declared but never referenced
    440            HalUARTWrite(0,"\r\n\r\n",4);
    441            MicroWait(50);
    442          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine0:
   \   000000   7404         MOV     A,#0x4
   \   000002   12....       LCALL   ?XSTACK_DISP0_8
   \   000005   12....       LCALL   ?Subroutine16 & 0xFFFF
   \                     ??CrossCallReturnLabel_23:
   \   000008   12....       LCALL   ?DEALLOC_XSTACK8
   \   00000B                ; Setup parameters for call to function HalUARTWrite
   \   00000B                ; Setup parameters for call to function strlen
   \   00000B                ; Setup parameters for call to function HalUARTWrite
   \   00000B                ; Setup parameters for call to function strlen
   \   00000B   85..82       MOV     DPL,?XSP + 0
   \   00000E   85..83       MOV     DPH,?XSP + 1
   \   000011   12....       LCALL   ?Subroutine21 & 0xFFFF
   \                     ??CrossCallReturnLabel_38:
   \   000014   85..82       MOV     DPL,?XSP + 0
   \   000017   85..83       MOV     DPH,?XSP + 1
   \   00001A   12....       LCALL   ?Subroutine3 & 0xFFFF
   \                     ??CrossCallReturnLabel_0:
   \   00001D   7419         MOV     A,#0x19
   \   00001F                REQUIRE ??Subroutine24_0
   \   00001F                ; // Fall through to label ??Subroutine24_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine24_0:
   \   000000   12....       LCALL   ?DEALLOC_XSTACK8
   \   000003   7F08         MOV     R7,#0x8
   \   000005   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine10:
   \   000000   7A04         MOV     R2,#0x4
   \   000002   7904         MOV     R1,#0x4
   \   000004                REQUIRE ??Subroutine25_0
   \   000004                ; // Fall through to label ??Subroutine25_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine25_0:
   \   000000   12....       LCALL   ??HalAdcRead?relay
   \   000003   8A..         MOV     ?V0 + 0,R2
   \   000005   8B..         MOV     ?V0 + 1,R3
   \   000007   AE..         MOV     R6,?V0 + 0
   \   000009   AF..         MOV     R7,?V0 + 1
   \   00000B   75..0A       MOV     ?V0 + 0,#0xa
   \   00000E   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine9:
   \   000000   7A04         MOV     R2,#0x4
   \   000002   7904         MOV     R1,#0x4
   \   000004                REQUIRE ??Subroutine26_0
   \   000004                ; // Fall through to label ??Subroutine26_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine26_0:
   \   000000   12....       LCALL   ??HalAdcRead?relay
   \   000003   8A..         MOV     ?V0 + 2,R2
   \   000005   8B..         MOV     ?V0 + 3,R3
   \   000007   EE           MOV     A,R6
   \   000008   25..         ADD     A,?V0 + 2
   \   00000A   FE           MOV     R6,A
   \   00000B   EF           MOV     A,R7
   \   00000C   35..         ADDC    A,?V0 + 3
   \   00000E   C3           CLR     C
   \   00000F   13           RRC     A
   \   000010   FF           MOV     R7,A
   \   000011   EE           MOV     A,R6
   \   000012   13           RRC     A
   \   000013   FE           MOV     R6,A
   \   000014   15..         DEC     ?V0 + 0
   \   000016   E5..         MOV     A,?V0 + 0
   \   000018   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine21:
   \   000000   AA82         MOV     R2,DPL
   \   000002   AB83         MOV     R3,DPH
   \   000004   12....       LCALL   ??strlen?relay
   \   000007   EA           MOV     A,R2
   \   000008   FC           MOV     R4,A
   \   000009   EB           MOV     A,R3
   \   00000A   FD           MOV     R5,A
   \   00000B   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine16:
   \   000000   AA82         MOV     R2,DPL
   \   000002   AB83         MOV     R3,DPH
   \   000004   12....       LCALL   ??sprintf?relay
   \   000007   7404         MOV     A,#0x4
   \   000009   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine3:
   \   000000   AA82         MOV     R2,DPL
   \   000002   AB83         MOV     R3,DPH
   \   000004   7900         MOV     R1,#0x0
   \   000006   12....       LCALL   ??HalUARTWrite?relay
   \   000009                ; Setup parameters for call to function HalUARTWrite
   \   000009                ; Setup parameters for call to function HalUARTWrite
   \   000009                ; Setup parameters for call to function HalUARTWrite
   \   000009   7C04         MOV     R4,#0x4
   \   00000B   7D00         MOV     R5,#0x0
   \   00000D   7A..         MOV     R2,#`?<Constant "\\r\\n\\r\\n">` & 0xff
   \   00000F   7B..         MOV     R3,#(`?<Constant "\\r\\n\\r\\n">` >> 8) & 0xff
   \   000011   7900         MOV     R1,#0x0
   \   000013   12....       LCALL   ??HalUARTWrite?relay
   \   000016                ; Setup parameters for call to function Onboard_wait
   \   000016                ; Setup parameters for call to function Onboard_wait
   \   000016                ; Setup parameters for call to function Onboard_wait
   \   000016   7A32         MOV     R2,#0x32
   \   000018   7B00         MOV     R3,#0x0
   \   00001A   12....       LCALL   ??Onboard_wait?relay
   \   00001D   22           RET
    443          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    444          void GetChannel2ADC(void)
   \                     GetChannel2ADC:
    445          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 25
   \   000005   74E7         MOV     A,#-0x19
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    446            uint16 ADC_RegData;
    447            uint8 ADC_Result_RAW[15];
    448            uint8 ADC_Result_ASCII[25];
    449            float ADC_Vol=0;
    450              uint8 i=0;
    451              //多次读出ADC的值，然后取平均值
    452              ADC_RegData = HalAdcRead(HAL_ADC_CHANNEL_0,HAL_ADC_RESOLUTION_14);     //选择P0_0,14位分辨率,13位有效数据
   \   00000A                ; Setup parameters for call to function HalAdcRead
   \   00000A   7A04         MOV     R2,#0x4
   \   00000C   7900         MOV     R1,#0x0
   \   00000E   12....       LCALL   ??Subroutine25_0 & 0xFFFF
    453              //获得平均值
    454              for(i=0;i<10;i++)
    455              {
    456                ADC_RegData += HalAdcRead(HAL_ADC_CHANNEL_0,HAL_ADC_RESOLUTION_14);   //选择P0_0,14位分辨率,13位有效数据
    457                ADC_RegData >>=1;                                                    //除以2
   \                     ??CrossCallReturnLabel_44:
   \   000011                ; Setup parameters for call to function HalAdcRead
   \   000011   7A04         MOV     R2,#0x4
   \   000013   7900         MOV     R1,#0x0
   \   000015   12....       LCALL   ??Subroutine26_0 & 0xFFFF
    458              }
   \                     ??CrossCallReturnLabel_47:
   \   000018   70F7         JNZ     ??CrossCallReturnLabel_44
    459              ADC_Vol = (float)ADC_RegData*3.4/8192;
    460              sprintf(ADC_Result_ASCII,"P0.0:%.4fV",ADC_Vol);    //将电压值转换为ASCII
                             ^
Warning[Pe167]: argument of type "unsigned char *" is incompatible with
          parameter of type "char *"
   \   00001A                ; Setup parameters for call to function sprintf
   \   00001A   8E..         MOV     ?V0 + 0,R6
   \   00001C   8F..         MOV     ?V0 + 1,R7
   \   00001E   E4           CLR     A
   \   00001F   F5..         MOV     ?V0 + 2,A
   \   000021   F5..         MOV     ?V0 + 3,A
   \   000023   78..         MOV     R0,#?V0 + 0
   \   000025   12....       LCALL   ?UL_TO_FLT
   \   000028   90....       MOV     DPTR,#__Constant_4059999a
   \   00002B   78..         MOV     R0,#?V0 + 4
   \   00002D   12....       LCALL   ?L_MOV_X
   \   000030   78..         MOV     R0,#?V0 + 0
   \   000032   79..         MOV     R1,#?V0 + 4
   \   000034   12....       LCALL   ?FLT_MUL
   \   000037   90....       MOV     DPTR,#__Constant_39000000
   \   00003A   78..         MOV     R0,#?V0 + 4
   \   00003C   12....       LCALL   ?L_MOV_X
   \   00003F   78..         MOV     R0,#?V0 + 0
   \   000041   79..         MOV     R1,#?V0 + 4
   \   000043   12....       LCALL   ?FLT_MUL
   \   000046   78..         MOV     R0,#?V0 + 0
   \   000048   12....       LCALL   ?PUSH_XSTACK_I_FOUR
   \   00004B   7C..         MOV     R4,#`?<Constant "P0.0:%.4fV">` & 0xff
   \   00004D   7D..         MOV     R5,#(`?<Constant "P0.0:%.4fV">` >> 8) & 0xff
   \   00004F   02....       LJMP    ?Subroutine0 & 0xFFFF
    461              HalUARTWrite(0,ADC_Result_ASCII,strlen(ADC_Result_ASCII));             //将电压值打印出来
                                                            ^
Warning[Pe167]: argument of type "unsigned char *" is incompatible with
          parameter of type "char const *"

    uint8 ADC_Result_RAW[15];
          ^
"C:\Users\Administrator\Desktop\TENZ组播 改2\Projects\zstack\Samples\SampleApp\Source\SampleApp.c",447  Warning[Pe177]: 
          variable "ADC_Result_RAW" was declared but never referenced
    462              HalUARTWrite(0,"\r\n\r\n",4);
    463              MicroWait(50);
    464          }
    465          
    466          
    467          /*********************************************************************
    468           * Event Generation Functions
    469           */
    470          /*********************************************************************
    471           * @fn      SampleApp_HandleKeys
    472           *
    473           * @brief   Handles all key events for this device.
    474           *
    475           * @param   shift - true if in shift/alt.
    476           * @param   keys - bit field for key events. Valid entries:
    477           *                 HAL_KEY_SW_2
    478           *                 HAL_KEY_SW_1
    479           *
    480           * @return  none
    481           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    482          void SampleApp_HandleKeys( uint8 shift, uint8 keys )
   \                     SampleApp_HandleKeys:
    483          {
   \   000000   74EC         MOV     A,#-0x14
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 20
   \   000005                ; Auto size: 52
   \   000005   74CC         MOV     A,#-0x34
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    484            (void)shift;  // Intentionally unreferenced parameter
    485            static uint8 LedStatus=0;
    486            char temp;
    487            unsigned char humi;
    488            uint8 GasSenDisplayArr[50];
    489            uint8 PublicFlag=0;              //该变量记录了DHT11的状态（是否读取成功)，还可以记录其他状态
    490          
    491            uint16 ADC_RegData;
    492            uint8 ADC_Result_RAW[15];
    493            uint8 ADC_Result_ASCII[25];
    494            float ADC_Vol=0;
    495          
    496            uint8 i=0;
    497            uint8 TEMP_ARR[20];
    498          
    499            uint8 Transmit_data[5];      //需要发送的数据
    500            uint16 TGS813GasSenDataSave=0;     //保存气体传感器的数据
    501          
    502            PublicFlag =0;             //清空标志位
   \   00000A   75..00       MOV     ?V0 + 1,#0x0
    503          
    504          
    505            //ADC测试结果，使用内部参考电压是最准确的2017 2 19
    506            //注意杜邦线的压降需要补偿，实际电路中，务必测试传感器引脚到ADC引脚的压降，然后软件加以补偿。2017 2 19
    507            if ( keys & HAL_KEY_SW_6 )
   \   00000D   EA           MOV     A,R2
   \   00000E   A2E5         MOV     C,0xE0 /* A   */.5
   \   000010   4003         JC      $+5
   \   000012   02....       LJMP    ??SampleApp_HandleKeys_0 & 0xFFFF
    508            {
    509                 //温度传感器  DHT11
    510          //    HalUARTWrite(0,"DHT11\r\n",7);
    511              //DHT11读取失败，可能DHT11损坏，可能DHT11被拔出或者连线松动
    512              if(dht11_value(&temp , &humi , DHT11_UINT8) != 0)
                                    ^
Warning[Pe167]: argument of type "char *" is incompatible with parameter of
          type "unsigned char *"
   \   000015                ; Setup parameters for call to function dht11_value
   \   000015   7902         MOV     R1,#0x2
   \   000017   85..82       MOV     DPL,?XSP + 0
   \   00001A   85..83       MOV     DPH,?XSP + 1
   \   00001D   AC82         MOV     R4,DPL
   \   00001F   AD83         MOV     R5,DPH
   \   000021   7401         MOV     A,#0x1
   \   000023   12....       LCALL   ?XSTACK_DISP0_8
   \   000026   AA82         MOV     R2,DPL
   \   000028   AB83         MOV     R3,DPH
   \   00002A   12....       LCALL   ??dht11_value?relay
   \   00002D   E9           MOV     A,R1
   \   00002E   600B         JZ      ??SampleApp_HandleKeys_1
    513              {
    514                temp = DHT11_TEMP_DEFAULT;  //设置温湿度为默认值
   \   000030   7401         MOV     A,#0x1
   \   000032   12....       LCALL   ?XSTACK_DISP0_8
   \   000035   12....       LCALL   ?Subroutine6 & 0xFFFF
    515                humi = DHT11_HUMI_DEFAULT;
    516                PublicFlag |= (1<<0);     //置位标志位
   \                     ??CrossCallReturnLabel_6:
   \   000038   75..01       MOV     ?V0 + 1,#0x1
    517              }
    518          
    519          /* For Test
    520             sprintf(TEMP_ARR,"Temp:%d Humi:%d",temp,humi);
    521              HalUARTWrite(0,TEMP_ARR,strlen(TEMP_ARR));
    522              HalUARTWrite(0,"\r\n",2);
    523          */
    524              //多次读出ADC的值，然后取平均值
    525              ADC_RegData = HalAdcRead(HAL_ADC_CHANNEL_4,HAL_ADC_RESOLUTION_14);   //选择P0_4,14位分辨率，13位有效数据
   \                     ??SampleApp_HandleKeys_1:
   \   00003B                ; Setup parameters for call to function HalAdcRead
   \   00003B   7A04         MOV     R2,#0x4
   \   00003D   7904         MOV     R1,#0x4
   \   00003F   12....       LCALL   ??HalAdcRead?relay
   \   000042   8A..         MOV     ?V0 + 2,R2
   \   000044   8B..         MOV     ?V0 + 3,R3
   \   000046   AE..         MOV     R6,?V0 + 2
   \   000048   AF..         MOV     R7,?V0 + 3
    526              for(i=0;i<10;i++)
   \   00004A   75..0A       MOV     ?V0 + 2,#0xa
    527              {
    528                ADC_RegData += HalAdcRead(HAL_ADC_CHANNEL_4,HAL_ADC_RESOLUTION_14);  //选择P0_4,14位分辨率,13位有效数据
    529                ADC_RegData >>=1;                                                    //除以2
   \                     ??SampleApp_HandleKeys_2:
   \   00004D                ; Setup parameters for call to function HalAdcRead
   \   00004D   7A04         MOV     R2,#0x4
   \   00004F   7904         MOV     R1,#0x4
   \   000051   12....       LCALL   ??HalAdcRead?relay
   \   000054   8A..         MOV     ?V0 + 4,R2
   \   000056   8B..         MOV     ?V0 + 5,R3
   \   000058   EE           MOV     A,R6
   \   000059   25..         ADD     A,?V0 + 4
   \   00005B   FE           MOV     R6,A
   \   00005C   EF           MOV     A,R7
   \   00005D   35..         ADDC    A,?V0 + 5
   \   00005F   C3           CLR     C
   \   000060   13           RRC     A
   \   000061   FF           MOV     R7,A
   \   000062   EE           MOV     A,R6
   \   000063   13           RRC     A
   \   000064   FE           MOV     R6,A
    530              }
   \   000065   15..         DEC     ?V0 + 2
   \   000067   E5..         MOV     A,?V0 + 2
   \   000069   70E2         JNZ     ??SampleApp_HandleKeys_2
    531             //ADC_Vol =  (float)ADC_RegData*3.3/8192 + GasSen_Wire_Compensation;     //获取电压值并补偿  补偿导线压降
    532              ADC_Vol = (float)ADC_RegData*3.3/8192;
    533              sprintf(ADC_Result_ASCII,"P0.4:%.4fV",ADC_Vol);    //将电压值转换为ASCII
                             ^
Warning[Pe167]: argument of type "unsigned char *" is incompatible with
          parameter of type "char *"
   \   00006B                ; Setup parameters for call to function sprintf
   \   00006B   8E..         MOV     ?V0 + 4,R6
   \   00006D   8F..         MOV     ?V0 + 5,R7
   \   00006F   E4           CLR     A
   \   000070   F5..         MOV     ?V0 + 6,A
   \   000072   F5..         MOV     ?V0 + 7,A
   \   000074   78..         MOV     R0,#?V0 + 4
   \   000076   12....       LCALL   ?UL_TO_FLT
   \   000079   90....       MOV     DPTR,#__Constant_40533333
   \   00007C   78..         MOV     R0,#?V0 + 8
   \   00007E   12....       LCALL   ?L_MOV_X
   \   000081   78..         MOV     R0,#?V0 + 4
   \   000083   79..         MOV     R1,#?V0 + 8
   \   000085   12....       LCALL   ?FLT_MUL
   \   000088   90....       MOV     DPTR,#__Constant_39000000
   \   00008B   78..         MOV     R0,#?V0 + 8
   \   00008D   12....       LCALL   ?L_MOV_X
   \   000090   78..         MOV     R0,#?V0 + 4
   \   000092   79..         MOV     R1,#?V0 + 8
   \   000094   12....       LCALL   ?FLT_MUL
   \   000097   78..         MOV     R0,#?V0 + 4
   \   000099   12....       LCALL   ?PUSH_XSTACK_I_FOUR
   \   00009C   7C..         MOV     R4,#`?<Constant "P0.4:%.4fV">` & 0xff
   \   00009E   7D..         MOV     R5,#(`?<Constant "P0.4:%.4fV">` >> 8) & 0xff
   \   0000A0   741F         MOV     A,#0x1f
   \   0000A2   12....       LCALL   ?XSTACK_DISP0_8
   \   0000A5   12....       LCALL   ?Subroutine16 & 0xFFFF
   \                     ??CrossCallReturnLabel_24:
   \   0000A8   12....       LCALL   ?DEALLOC_XSTACK8
    534              HalUARTWrite(0,ADC_Result_ASCII,strlen(ADC_Result_ASCII));             //将电压值打印出来
                                                            ^
Warning[Pe167]: argument of type "unsigned char *" is incompatible with
          parameter of type "char const *"
   \   0000AB                ; Setup parameters for call to function HalUARTWrite
   \   0000AB                ; Setup parameters for call to function strlen
   \   0000AB   741B         MOV     A,#0x1b
   \   0000AD   12....       LCALL   ?XSTACK_DISP0_8
   \   0000B0   12....       LCALL   ?Subroutine21 & 0xFFFF
   \                     ??CrossCallReturnLabel_39:
   \   0000B3   741B         MOV     A,#0x1b
   \   0000B5   12....       LCALL   ?XSTACK_DISP0_8
   \   0000B8   12....       LCALL   ?Subroutine3 & 0xFFFF
    535              HalUARTWrite(0,"\r\n\r\n",4);
    536              MicroWait(50);
    537              //Gas sensor获取数据，然后打印
    538           //   TGS813GasSenDataSave = (uint16)TGS813GetConcentration(ADC_Vol,temp,humi);
    539              /*
    540              sprintf(GasSenDisplayArr,"Gas concertation:%dppm\r\n",TGS813GasSenDataSave);
    541              HalUARTWrite(0,GasSenDisplayArr,strlen(GasSenDisplayArr));
    542              */
    543          /*
    544              if((TGS813GasSen_Flag & (1<<2)) || (TGS813GasSen_Flag & (1<<3)))     //温湿度传感器测得的温度不在范围
    545              {
    546                PublicFlag |= (1<<1);      //置位标志位
    547              }
    548              if((TGS813GasSen_Flag & (1<<4)) || (TGS813GasSen_Flag & (1<<5)))    //温湿度传感器测得的湿度不在范围
    549              {
    550                PublicFlag |= (1<<2);      //置位标志位
    551              }
    552              if((TGS813GasSen_Flag & (1<<0)))                              //浓度值低于监测下限
    553              {
    554                PublicFlag |= (1<<3);      //置位标志位
    555              }
    556              if((TGS813GasSen_Flag & (1<<1)))                             //浓度值高于监测上限
    557              {
    558                PublicFlag |= (1<<4);      //置位标志位
    559              }
    560              */
    561          /*For test    */
    562              sprintf(TEMP_ARR,"GeneralFlag1:%d\r\n",PublicFlag);
                             ^
Warning[Pe167]: argument of type "unsigned char *" is incompatible with
          parameter of type "char *"
   \                     ??CrossCallReturnLabel_1:
   \   0000BB                ; Setup parameters for call to function sprintf
   \   0000BB   85....       MOV     ?V0 + 2,?V0 + 1
   \   0000BE   75..00       MOV     ?V0 + 3,#0x0
   \   0000C1   78..         MOV     R0,#?V0 + 2
   \   0000C3   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000C6   7C..         MOV     R4,#`?<Constant "GeneralFlag1:%d\\r\\n">` & 0xff
   \   0000C8   7D..         MOV     R5,#(`?<Constant "GeneralFlag1:%d\\r\\n">` >> 8) & 0xff
   \   0000CA   7409         MOV     A,#0x9
   \   0000CC   12....       LCALL   ?XSTACK_DISP0_8
   \   0000CF   12....       LCALL   ?Subroutine13 & 0xFFFF
   \                     ??CrossCallReturnLabel_12:
   \   0000D2   12....       LCALL   ?DEALLOC_XSTACK8
    563              HalUARTWrite(0,TEMP_ARR,strlen(TEMP_ARR));
                                                    ^
Warning[Pe167]: argument of type "unsigned char *" is incompatible with
          parameter of type "char const *"
   \   0000D5                ; Setup parameters for call to function HalUARTWrite
   \   0000D5                ; Setup parameters for call to function strlen
   \   0000D5   7407         MOV     A,#0x7
   \   0000D7   12....       LCALL   ?XSTACK_DISP0_8
   \   0000DA   12....       LCALL   ?Subroutine19 & 0xFFFF
   \                     ??CrossCallReturnLabel_34:
   \   0000DD   12....       LCALL   ?XSTACK_DISP0_8
   \   0000E0   AA82         MOV     R2,DPL
   \   0000E2   AB83         MOV     R3,DPH
   \   0000E4   7900         MOV     R1,#0x0
   \   0000E6   12....       LCALL   ??HalUARTWrite?relay
    564          
    565              Transmit_data[0] = (uint8)temp;                           //装入温度
   \   0000E9   7401         MOV     A,#0x1
   \   0000EB   12....       LCALL   ?XSTACK_DISP0_8
   \   0000EE   E0           MOVX    A,@DPTR
   \   0000EF   C0E0         PUSH    A
   \   0000F1   7402         MOV     A,#0x2
   \   0000F3   12....       LCALL   ?XSTACK_DISP0_8
   \   0000F6   D0E0         POP     A
   \   0000F8   12....       LCALL   ?Subroutine7 & 0xFFFF
    566              Transmit_data[1] = (uint8)humi;                           //装入湿度
   \                     ??CrossCallReturnLabel_8:
   \   0000FB   C0E0         PUSH    A
   \   0000FD   7403         MOV     A,#0x3
   \   0000FF   12....       LCALL   ?XSTACK_DISP0_8
   \   000102   D0E0         POP     A
   \   000104   F0           MOVX    @DPTR,A
    567              Transmit_data[2] = HI_UINT16(TGS813GasSenDataSave);       //装入计算后的气体浓度高八位
   \   000105   7404         MOV     A,#0x4
   \   000107   12....       LCALL   ?XSTACK_DISP0_8
   \   00010A   E4           CLR     A
   \   00010B   F0           MOVX    @DPTR,A
    568              Transmit_data[3] = LO_UINT16(TGS813GasSenDataSave);       //装入计算后的气体浓度低八位
   \   00010C   7405         MOV     A,#0x5
   \   00010E   12....       LCALL   ?XSTACK_DISP0_8
   \   000111   E4           CLR     A
   \   000112   F0           MOVX    @DPTR,A
    569              Transmit_data[4] =  PublicFlag;                           //将总标志位写入发送包中
   \   000113   7406         MOV     A,#0x6
   \   000115   12....       LCALL   ?XSTACK_DISP0_8
   \   000118   E5..         MOV     A,?V0 + 1
   \   00011A   F0           MOVX    @DPTR,A
    570          
    571              if ( AF_DataRequest( &SampleApp_Point_To_Point_DstAddr, &SampleApp_epDesc,
    572                               SAMPLEAPP_GAS_SENSOR_CLUSTERID,        //与接收方建立联系的参数，如1，表示由周期性广播方式发送过来的数据
    573                               5,                                     //数据量（长度）
    574                               Transmit_data,                         //数据首地址
    575                               &SampleApp_TransID,
    576                               AF_DISCV_ROUTE,
    577                               AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   00011B                ; Setup parameters for call to function AF_DataRequest
   \   00011B   75..1E       MOV     ?V0 + 2,#0x1e
   \   00011E   78..         MOV     R0,#?V0 + 2
   \   000120   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000123   75....       MOV     ?V0 + 2,#SampleApp_TransID & 0xff
   \   000126   75....       MOV     ?V0 + 3,#(SampleApp_TransID >> 8) & 0xff
   \   000129   78..         MOV     R0,#?V0 + 2
   \   00012B   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00012E   7405         MOV     A,#0x5
   \   000130   12....       LCALL   ?XSTACK_DISP0_8
   \   000133   8582..       MOV     ?V0 + 2,DPL
   \   000136   8583..       MOV     ?V0 + 3,DPH
   \   000139   78..         MOV     R0,#?V0 + 2
   \   00013B   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00013E   75..05       MOV     ?V0 + 2,#0x5
   \   000141   75..00       MOV     ?V0 + 3,#0x0
   \   000144   78..         MOV     R0,#?V0 + 2
   \   000146   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000149   75..06       MOV     ?V0 + 2,#0x6
   \   00014C   78..         MOV     R0,#?V0 + 2
   \   00014E   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000151   12....       LCALL   ?Subroutine18 & 0xFFFF
   \                     ??CrossCallReturnLabel_62:
   \   000154   12....       LCALL   ?DEALLOC_XSTACK8
    578              {
    579              }
    580          
    581              for(i=0;i<5;i++)
   \   000157   7E00         MOV     R6,#0x0
    582              {
    583                sprintf(TEMP_ARR,"Transmit_data[%d]:%d\r\n",i,Transmit_data[i]);
                               ^
Warning[Pe167]: argument of type "unsigned char *" is incompatible with
          parameter of type "char *"
   \                     ??SampleApp_HandleKeys_3:
   \   000159   8E82         MOV     DPL,R6
   \   00015B   8582..       MOV     ?V0 + 2,DPL
   \   00015E                ; Setup parameters for call to function sprintf
   \   00015E   7402         MOV     A,#0x2
   \   000160   12....       LCALL   ?XSTACK_DISP0_8
   \   000163   E582         MOV     A,DPL
   \   000165   25..         ADD     A,?V0 + 2
   \   000167   F582         MOV     DPL,A
   \   000169   E583         MOV     A,DPH
   \   00016B   12....       LCALL   ??Subroutine27_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_58:
   \   00016E   F5..         MOV     ?V0 + 4,A
   \   000170   75..00       MOV     ?V0 + 5,#0x0
   \   000173   78..         MOV     R0,#?V0 + 4
   \   000175   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000178   78..         MOV     R0,#?V0 + 2
   \   00017A   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00017D   7C..         MOV     R4,#`?<Constant "Transmit_data[%d]:%d\\r\\n">` & 0xff
   \   00017F   7D..         MOV     R5,#(`?<Constant "Transmit_data[%d]:%d\\r\\n">` >> 8) & 0xff
   \   000181   740B         MOV     A,#0xb
   \   000183   12....       LCALL   ?XSTACK_DISP0_8
   \   000186   12....       LCALL   ?Subroutine16 & 0xFFFF
   \                     ??CrossCallReturnLabel_25:
   \   000189   12....       LCALL   ?DEALLOC_XSTACK8
    584                MicroWait(5000);
   \   00018C                ; Setup parameters for call to function Onboard_wait
   \   00018C   7A88         MOV     R2,#-0x78
   \   00018E   7B13         MOV     R3,#0x13
   \   000190   12....       LCALL   ??Onboard_wait?relay
    585                HalUARTWrite(0,TEMP_ARR,strlen(TEMP_ARR));
                                                      ^
Warning[Pe167]: argument of type "unsigned char *" is incompatible with
          parameter of type "char const *"

    static uint8 LedStatus=0;
                 ^
"C:\Users\Administrator\Desktop\TENZ组播 改2\Projects\zstack\Samples\SampleApp\Source\SampleApp.c",485  Warning[Pe177]: 
          variable "LedStatus" was declared but never referenced

    uint8 GasSenDisplayArr[50];
          ^
"C:\Users\Administrator\Desktop\TENZ组播 改2\Projects\zstack\Samples\SampleApp\Source\SampleApp.c",488  Warning[Pe177]: 
          variable "GasSenDisplayArr" was declared but never referenced

    uint8 ADC_Result_RAW[15];
          ^
"C:\Users\Administrator\Desktop\TENZ组播 改2\Projects\zstack\Samples\SampleApp\Source\SampleApp.c",492  Warning[Pe177]: 
          variable "ADC_Result_RAW" was declared but never referenced
   \   000193                ; Setup parameters for call to function HalUARTWrite
   \   000193                ; Setup parameters for call to function strlen
   \   000193   7407         MOV     A,#0x7
   \   000195   12....       LCALL   ?XSTACK_DISP0_8
   \   000198   12....       LCALL   ?Subroutine19 & 0xFFFF
   \                     ??CrossCallReturnLabel_35:
   \   00019B   12....       LCALL   ?XSTACK_DISP0_8
   \   00019E   AA82         MOV     R2,DPL
   \   0001A0   AB83         MOV     R3,DPH
   \   0001A2   7900         MOV     R1,#0x0
   \   0001A4   12....       LCALL   ??HalUARTWrite?relay
    586                MicroWait(5000);
   \   0001A7                ; Setup parameters for call to function Onboard_wait
   \   0001A7   7A88         MOV     R2,#-0x78
   \   0001A9   7B13         MOV     R3,#0x13
   \   0001AB   12....       LCALL   ??Onboard_wait?relay
    587              }
   \   0001AE   0E           INC     R6
   \   0001AF   EE           MOV     A,R6
   \   0001B0   C3           CLR     C
   \   0001B1   9405         SUBB    A,#0x5
   \   0001B3   40A4         JC      ??SampleApp_HandleKeys_3
    588          
    589              //判断标志位，并给出提示信息
    590              //DHT出错
    591              if(PublicFlag & (1<<0))
   \   0001B5   E5..         MOV     A,?V0 + 1
   \   0001B7   A2E0         MOV     C,0xE0 /* A   */.0
   \   0001B9   500D         JNC     ??SampleApp_HandleKeys_0
    592              {
    593                HalUARTWrite(0,"DHT11 Error!\r\n",strlen("DHT11 Error!\r\n"));
   \   0001BB                ; Setup parameters for call to function HalUARTWrite
   \   0001BB   7C0E         MOV     R4,#0xe
   \   0001BD   7D00         MOV     R5,#0x0
   \   0001BF   7A..         MOV     R2,#`?<Constant "DHT11 Error!\\r\\n">` & 0xff
   \   0001C1   7B..         MOV     R3,#(`?<Constant "DHT11 Error!\\r\\n">` >> 8) & 0xff
   \   0001C3   7900         MOV     R1,#0x0
   \   0001C5   12....       LCALL   ??HalUARTWrite?relay
    594              }
    595              //温度超出范围
    596              if(PublicFlag & (1<<1))
    597              {
    598                HalUARTWrite(0,"Temperature out of rang!\r\n",strlen("Temperature out of rang!\r\n"));
    599                //HalUARTWrite(0,"Temp",strlen("Temp"));
    600              }
    601              //湿度超出范围
    602              if(PublicFlag & (1<<2))
    603              {
    604                //HalUARTWrite(0,"Humi",strlen("Humi"));
    605                HalUARTWrite(0,"Humility out of range!\r\n",strlen("Humility out of range!\r\n"));
    606              }
    607              //浓度值低于监测下限
    608              if(PublicFlag & (1<<3))
    609              {
    610                HalUARTWrite(0,"Concentration out of rang!\r\n",strlen("Concentration out of rang!\r\n"));
    611              }
    612              //浓度值高于监测上限
    613              if(PublicFlag & (1<<4))
    614              {
    615                HalUARTWrite(0,"Concentration out of rang!\r\n",strlen("Concentration out of rang!\r\n"));
    616              }
    617          
    618          
    619          
    620           /*    ADC_RegData = HalAdcRead(HAL_ADC_CHANNEL_0,HAL_ADC_RESOLUTION_14);     //选择P0_0,14位分辨率,13位有效数据
    621              //获得平均值
    622              for(i=0;i<10;i++)
    623              {
    624                ADC_RegData += HalAdcRead(HAL_ADC_CHANNEL_0,HAL_ADC_RESOLUTION_14);   //选择P0_4,14位分辨率,13位有效数据
    625                ADC_RegData >>=1;                                                    //除以2
    626              }
    627              ADC_Vol = (float)ADC_RegData*3.3/8192;
    628              sprintf(ADC_Result_ASCII,"P0.0:%.4fV",ADC_Vol);    //将电压值转换为ASCII
    629              HalUARTWrite(0,ADC_Result_ASCII,strlen(ADC_Result_ASCII));             //将电压值打印出来
    630              HalUARTWrite(0,"\r\n\r\n",4);
    631              MicroWait(50);
    632          
    633              //Gas sensor获取数据，并床后打印
    634              sprintf(GasSenDisplayArr,"Gas concertation:%.0fppm\r\n",TGS813GetConcentration(0.16129f,20,50));
    635              HalUARTWrite(0,GasSenDisplayArr,strlen(GasSenDisplayArr));
    636              */
    637          
    638              /*
    639              //温度传感器
    640              HalUARTWrite(0,"DHT11\r\n",7);
    641              if(dht11_value(temp , humi , DHT11_STRING) == 0)
    642              {
    643                HalUARTWrite(0,"Temp:",5);
    644                HalUARTWrite(0,temp,2);
    645                HalUARTWrite(0,"C\r\n",3);
    646          
    647                HalUARTWrite(0,"Humi:",5);
    648                HalUARTWrite(0,humi,2);
    649                HalUARTWrite(0,"%\r\n",3);
    650              }
    651              else
    652              {
    653                 HalUARTWrite(0,"Fail\r\n",6);
    654              }
    655              */
    656          /*    HAL_TOGGLE_LED1();
    657              HAL_TOGGLE_LED2();
    658              HAL_TOGGLE_LED3();
    659              LedStatus = (LedStatus==0)? 1:0;
    660              if ( AF_DataRequest( &SampleApp_Periodic_DstAddr, &SampleApp_epDesc,
    661                               SAMPLEAPP_LEDSTATUS_CLUSTERID, //与接收方建立联系的参数，如1，表示由周期性广播方式发送过来的数据
    662                               1,                            //数据量（长度）
    663                               &LedStatus,//数据首地址
    664                               &SampleApp_TransID,
    665                               AF_DISCV_ROUTE,
    666                               AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
    667              {
    668              }
    669              */
    670            }
    671          }
   \                     ??SampleApp_HandleKeys_0:
   \   0001C8   7434         MOV     A,#0x34
   \   0001CA                REQUIRE ?Subroutine1
   \   0001CA                ; // Fall through to label ?Subroutine1

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine1:
   \   000000   12....       LCALL   ?DEALLOC_XSTACK8
   \   000003   7F0C         MOV     R7,#0xc
   \   000005   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine19:
   \   000000   12....       LCALL   ?Subroutine21 & 0xFFFF
   \                     ??CrossCallReturnLabel_40:
   \   000003   7407         MOV     A,#0x7
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine27_0:
   \   000000   3400         ADDC    A,#0x0
   \   000002   F583         MOV     DPH,A
   \   000004   E0           MOVX    A,@DPTR
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine13:
   \   000000   AA82         MOV     R2,DPL
   \   000002   AB83         MOV     R3,DPH
   \   000004   12....       LCALL   ??sprintf?relay
   \   000007   7402         MOV     A,#0x2
   \   000009   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine18:
   \   000000   7920         MOV     R1,#0x20
   \   000002   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   000004   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   000006   7A..         MOV     R2,#SampleApp_Point_To_Point_DstAddr & 0xff
   \   000008   7B..         MOV     R3,#(SampleApp_Point_To_Point_DstAddr >> 8) & 0xff
   \   00000A                REQUIRE ??Subroutine31_0
   \   00000A                ; // Fall through to label ??Subroutine31_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine31_0:
   \   000000   12....       LCALL   ??AF_DataRequest?relay
   \   000003   7409         MOV     A,#0x9
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine7:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   85..82       MOV     DPL,?XSP + 0
   \   000004   85..83       MOV     DPH,?XSP + 1
   \   000007   E0           MOVX    A,@DPTR
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine6:
   \   000000   7419         MOV     A,#0x19
   \   000002   F0           MOVX    @DPTR,A
   \   000003   85..82       MOV     DPL,?XSP + 0
   \   000006   85..83       MOV     DPH,?XSP + 1
   \   000009   7441         MOV     A,#0x41
   \   00000B   F0           MOVX    @DPTR,A
   \   00000C   22           RET
    672          
    673          /*********************************************************************
    674           * LOCAL FUNCTIONS
    675           */
    676          
    677          /*********************************************************************
    678           * @fn      SampleApp_MessageMSGCB
    679           *
    680           * @brief   Data message processor callback.  This function processes
    681           *          any incoming data - probably from other devices.  So, based
    682           *          on cluster ID, perform the intended action.
    683           *
    684           * @param   none
    685           *
    686           * @return  none
    687           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    688          void SampleApp_MessageMSGCB( afIncomingMSGPacket_t *pkt )
   \                     SampleApp_MessageMSGCB:
    689          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 95
   \   000005   74A1         MOV     A,#-0x5f
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   8A..         MOV     ?V0 + 0,R2
   \   00000C   8B..         MOV     ?V0 + 1,R3
    690            uint16 flashTime;
    691            float Channel0_VolSave = 0.0f;
    692            uint8 LedStatus;
    693            uint8 GeneralFlagSave=0;                //保存发送过来的总接收标志位
    694            uint8 Dis_arr3[]="ShortAddr: ";
   \   00000E   90....       MOV     DPTR,#`?<Constant "ShortAddr: ">`
   \   000011   C082         PUSH    DPL
   \   000013   742F         MOV     A,#0x2f
   \   000015   12....       LCALL   ?XSTACK_DISP0_8
   \   000018   AC82         MOV     R4,DPL
   \   00001A   AD83         MOV     R5,DPH
   \   00001C   7583..       MOV     DPH,#(`?<Constant "ShortAddr: ">` >> 8) & 0xff
   \   00001F   D082         POP     DPL
   \   000021   740C         MOV     A,#0xc
   \   000023   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
    695            uint8 Dis_arr6[]="PanID: ";
   \   000026   90....       MOV     DPTR,#`?<Constant "PanID: ">`
   \   000029   C082         PUSH    DPL
   \   00002B   741C         MOV     A,#0x1c
   \   00002D   12....       LCALL   ?XSTACK_DISP0_8
   \   000030   AC82         MOV     R4,DPL
   \   000032   AD83         MOV     R5,DPH
   \   000034   7583..       MOV     DPH,#(`?<Constant "PanID: ">` >> 8) & 0xff
   \   000037   D082         POP     DPL
   \   000039   7408         MOV     A,#0x8
   \   00003B   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
    696            uint8 Dis_arr12[]="Rssi: ";
   \   00003E   90....       MOV     DPTR,#`?<Constant "Rssi: ">`
   \   000041   C082         PUSH    DPL
   \   000043   7415         MOV     A,#0x15
   \   000045   12....       LCALL   ?XSTACK_DISP0_8
   \   000048   AC82         MOV     R4,DPL
   \   00004A   AD83         MOV     R5,DPH
   \   00004C   7583..       MOV     DPH,#(`?<Constant "Rssi: ">` >> 8) & 0xff
   \   00004F   D082         POP     DPL
   \   000051   7407         MOV     A,#0x7
   \   000053   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
    697            uint8 Dis_arr17[]="Cmd.DataLength: ";
   \   000056   90....       MOV     DPTR,#`?<Constant "Cmd.DataLength: ">`
   \   000059   C082         PUSH    DPL
   \   00005B   744E         MOV     A,#0x4e
   \   00005D   12....       LCALL   ?XSTACK_DISP0_8
   \   000060   AC82         MOV     R4,DPL
   \   000062   AD83         MOV     R5,DPH
   \   000064   7583..       MOV     DPH,#(`?<Constant "Cmd.DataLength: ">` >> 8) & 0xff
   \   000067   D082         POP     DPL
   \   000069   7411         MOV     A,#0x11
   \   00006B   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
    698            uint8 Dis_arr18[]="Cmd.Data: ";
   \   00006E   90....       MOV     DPTR,#`?<Constant "Cmd.Data: ">`
   \   000071   C082         PUSH    DPL
   \   000073   7424         MOV     A,#0x24
   \   000075   12....       LCALL   ?XSTACK_DISP0_8
   \   000078   AC82         MOV     R4,DPL
   \   00007A   AD83         MOV     R5,DPH
   \   00007C   7583..       MOV     DPH,#(`?<Constant "Cmd.Data: ">` >> 8) & 0xff
   \   00007F   D082         POP     DPL
   \   000081   740B         MOV     A,#0xb
   \   000083   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
    699            uint8 respone_arr[]="The Node Message\r\n";
   \   000086   90....       MOV     DPTR,#`?<Constant "The Node Message\\r\\n">`
   \   000089   C082         PUSH    DPL
   \   00008B   743B         MOV     A,#0x3b
   \   00008D   12....       LCALL   ?XSTACK_DISP0_8
   \   000090   AC82         MOV     R4,DPL
   \   000092   AD83         MOV     R5,DPH
   \   000094   7583..       MOV     DPH,#(`?<Constant "The Node Message\\r\\n">` >> 8) & 0xff
   \   000097   D082         POP     DPL
   \   000099   7413         MOV     A,#0x13
   \   00009B   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
    700            char convert_arr[20];
    701            uint8 i=0;
    702          
    703          
    704            switch ( pkt->clusterId )
   \   00009E   8A82         MOV     DPL,R2
   \   0000A0   8B83         MOV     DPH,R3
   \   0000A2   A3           INC     DPTR
   \   0000A3   A3           INC     DPTR
   \   0000A4   A3           INC     DPTR
   \   0000A5   A3           INC     DPTR
   \   0000A6   E0           MOVX    A,@DPTR
   \   0000A7   F5..         MOV     ?V0 + 2,A
   \   0000A9   A3           INC     DPTR
   \   0000AA   E0           MOVX    A,@DPTR
   \   0000AB   F5..         MOV     ?V0 + 3,A
   \   0000AD   78..         MOV     R0,#?V0 + 2
   \   0000AF   12....       LCALL   ?US_SWITCH_DENSE
   \                     `?<Jumptable for SampleApp_MessageMSGCB>_0`:
   \   0000B2   0100         DW        1
   \   0000B4   05           DB        5
   \   0000B5   ....         DW        ??SampleApp_MessageMSGCB_0
   \   0000B7   ....         DW        ??SampleApp_MessageMSGCB_1
   \   0000B9   ....         DW        ??SampleApp_MessageMSGCB_2
   \   0000BB   ....         DW        ??SampleApp_MessageMSGCB_0
   \   0000BD   ....         DW        ??SampleApp_MessageMSGCB_3
   \   0000BF   ....         DW        ??SampleApp_MessageMSGCB_4
   \   0000C1   ....         DW        ??SampleApp_MessageMSGCB_5
    705            {
    706              case SAMPLEAPP_POINT_CLUSTERID:
    707                  HalUARTWrite(0,respone_arr,sizeof(respone_arr)-1);                    //显示信息
   \                     ??SampleApp_MessageMSGCB_4:
   \   0000C3                ; Setup parameters for call to function HalUARTWrite
   \   0000C3   7C12         MOV     R4,#0x12
   \   0000C5   7D00         MOV     R5,#0x0
   \   0000C7   743B         MOV     A,#0x3b
   \   0000C9   12....       LCALL   ?XSTACK_DISP0_8
   \   0000CC   AA82         MOV     R2,DPL
   \   0000CE   AB83         MOV     R3,DPH
   \   0000D0   7900         MOV     R1,#0x0
   \   0000D2   12....       LCALL   ??HalUARTWrite?relay
    708                  //pkt->srcAddr.addr.shortAddr   短地址
    709                  HalUARTWrite(0,Dis_arr3,sizeof(Dis_arr3)-1);                            //提示已经收到点播信息，
   \   0000D5                ; Setup parameters for call to function HalUARTWrite
   \   0000D5   7C0B         MOV     R4,#0xb
   \   0000D7   7D00         MOV     R5,#0x0
   \   0000D9   742F         MOV     A,#0x2f
   \   0000DB   12....       LCALL   ?XSTACK_DISP0_8
   \   0000DE   AA82         MOV     R2,DPL
   \   0000E0   AB83         MOV     R3,DPH
   \   0000E2   7900         MOV     R1,#0x0
   \   0000E4   12....       LCALL   ??HalUARTWrite?relay
    710                  sprintf(convert_arr,"0x%x\r\n",pkt->srcAddr.addr.shortAddr) ;           //转换为字符串
   \   0000E7                ; Setup parameters for call to function sprintf
   \   0000E7   85..82       MOV     DPL,?V0 + 0
   \   0000EA   85..83       MOV     DPH,?V0 + 1
   \   0000ED   A3           INC     DPTR
   \   0000EE   A3           INC     DPTR
   \   0000EF   A3           INC     DPTR
   \   0000F0   A3           INC     DPTR
   \   0000F1   A3           INC     DPTR
   \   0000F2   A3           INC     DPTR
   \   0000F3   12....       LCALL   ?PUSH_XSTACK8_X_TWO
   \   0000F6   7C..         MOV     R4,#`?<Constant "0x%x\\r\\n">` & 0xff
   \   0000F8   7D..         MOV     R5,#(`?<Constant "0x%x\\r\\n">` >> 8) & 0xff
   \   0000FA   7403         MOV     A,#0x3
   \   0000FC   12....       LCALL   ?XSTACK_DISP0_8
   \   0000FF   12....       LCALL   ?Subroutine13 & 0xFFFF
   \                     ??CrossCallReturnLabel_13:
   \   000102   12....       LCALL   ?DEALLOC_XSTACK8
    711                  HalUARTWrite(0,(unsigned char*)convert_arr,strlen(convert_arr));        //输出
   \   000105                ; Setup parameters for call to function HalUARTWrite
   \   000105                ; Setup parameters for call to function strlen
   \   000105   7401         MOV     A,#0x1
   \   000107   12....       LCALL   ?XSTACK_DISP0_8
   \   00010A   12....       LCALL   ?Subroutine17 & 0xFFFF
   \                     ??CrossCallReturnLabel_27:
   \   00010D   12....       LCALL   ?XSTACK_DISP0_8
   \   000110   AA82         MOV     R2,DPL
   \   000112   AB83         MOV     R3,DPH
   \   000114   7900         MOV     R1,#0x0
   \   000116   12....       LCALL   ??HalUARTWrite?relay
    712                  //pkt->srcAddr.panId        PANID
    713                  HalUARTWrite(0,Dis_arr6,sizeof(Dis_arr6)-1);                            //提示已经收到点播信息，
   \   000119                ; Setup parameters for call to function HalUARTWrite
   \   000119   7C07         MOV     R4,#0x7
   \   00011B   7D00         MOV     R5,#0x0
   \   00011D   741C         MOV     A,#0x1c
   \   00011F   12....       LCALL   ?XSTACK_DISP0_8
   \   000122   AA82         MOV     R2,DPL
   \   000124   AB83         MOV     R3,DPH
   \   000126   7900         MOV     R1,#0x0
   \   000128   12....       LCALL   ??HalUARTWrite?relay
    714                  sprintf(convert_arr,"0x%x\r\n",pkt->srcAddr.panId) ;                      //转换为字符串
   \   00012B                ; Setup parameters for call to function sprintf
   \   00012B   E5..         MOV     A,?V0 + 0
   \   00012D   2410         ADD     A,#0x10
   \   00012F   F582         MOV     DPL,A
   \   000131   E5..         MOV     A,?V0 + 1
   \   000133   3400         ADDC    A,#0x0
   \   000135   F583         MOV     DPH,A
   \   000137   12....       LCALL   ?PUSH_XSTACK8_X_TWO
   \   00013A   7C..         MOV     R4,#`?<Constant "0x%x\\r\\n">` & 0xff
   \   00013C   7D..         MOV     R5,#(`?<Constant "0x%x\\r\\n">` >> 8) & 0xff
   \   00013E   7403         MOV     A,#0x3
   \   000140   12....       LCALL   ?XSTACK_DISP0_8
   \   000143   12....       LCALL   ?Subroutine13 & 0xFFFF
   \                     ??CrossCallReturnLabel_14:
   \   000146   12....       LCALL   ?DEALLOC_XSTACK8
    715                  HalUARTWrite(0,(unsigned char*)convert_arr,strlen(convert_arr));        //输出
   \   000149                ; Setup parameters for call to function HalUARTWrite
   \   000149                ; Setup parameters for call to function strlen
   \   000149   7401         MOV     A,#0x1
   \   00014B   12....       LCALL   ?XSTACK_DISP0_8
   \   00014E   12....       LCALL   ?Subroutine17 & 0xFFFF
   \                     ??CrossCallReturnLabel_28:
   \   000151   12....       LCALL   ?XSTACK_DISP0_8
   \   000154   AA82         MOV     R2,DPL
   \   000156   AB83         MOV     R3,DPH
   \   000158   7900         MOV     R1,#0x0
   \   00015A   12....       LCALL   ??HalUARTWrite?relay
    716                  //pkt->->rssi  信号强度
    717                  HalUARTWrite(0,Dis_arr12,sizeof(Dis_arr12)-1);                            //提示已经收到点播信息，
   \   00015D                ; Setup parameters for call to function HalUARTWrite
   \   00015D   7C06         MOV     R4,#0x6
   \   00015F   7D00         MOV     R5,#0x0
   \   000161   7415         MOV     A,#0x15
   \   000163   12....       LCALL   ?XSTACK_DISP0_8
   \   000166   AA82         MOV     R2,DPL
   \   000168   AB83         MOV     R3,DPH
   \   00016A   7900         MOV     R1,#0x0
   \   00016C   12....       LCALL   ??HalUARTWrite?relay
    718                  sprintf(convert_arr,"%ddBm\r\n",pkt->rssi) ;                              //转换为字符串
   \   00016F                ; Setup parameters for call to function sprintf
   \   00016F   E5..         MOV     A,?V0 + 0
   \   000171   2418         ADD     A,#0x18
   \   000173   12....       LCALL   ?Subroutine23 & 0xFFFF
   \                     ??CrossCallReturnLabel_60:
   \   000176   F5..         MOV     ?V0 + 2,A
   \   000178   33           RLC     A
   \   000179   95E0         SUBB    A,0xE0 /* A   */
   \   00017B   F5..         MOV     ?V0 + 3,A
   \   00017D   78..         MOV     R0,#?V0 + 2
   \   00017F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000182   7C..         MOV     R4,#`?<Constant "%ddBm\\r\\n">` & 0xff
   \   000184   7D..         MOV     R5,#(`?<Constant "%ddBm\\r\\n">` >> 8) & 0xff
   \   000186   7403         MOV     A,#0x3
   \   000188   12....       LCALL   ?XSTACK_DISP0_8
   \   00018B   12....       LCALL   ?Subroutine13 & 0xFFFF
   \                     ??CrossCallReturnLabel_15:
   \   00018E   12....       LCALL   ?DEALLOC_XSTACK8
    719                  HalUARTWrite(0,(unsigned char*)convert_arr,strlen(convert_arr));          //输出
   \   000191                ; Setup parameters for call to function HalUARTWrite
   \   000191                ; Setup parameters for call to function strlen
   \   000191   7401         MOV     A,#0x1
   \   000193   12....       LCALL   ?XSTACK_DISP0_8
   \   000196   12....       LCALL   ?Subroutine17 & 0xFFFF
   \                     ??CrossCallReturnLabel_29:
   \   000199   12....       LCALL   ?XSTACK_DISP0_8
   \   00019C   AA82         MOV     R2,DPL
   \   00019E   AB83         MOV     R3,DPH
   \   0001A0   7900         MOV     R1,#0x0
   \   0001A2   12....       LCALL   ??HalUARTWrite?relay
    720                  //pkt->    数据长度
    721                  HalUARTWrite(0,Dis_arr17,sizeof(Dis_arr17)-1);                            //提示已经收到点播信息，
   \   0001A5                ; Setup parameters for call to function HalUARTWrite
   \   0001A5   7C10         MOV     R4,#0x10
   \   0001A7   7D00         MOV     R5,#0x0
   \   0001A9   744E         MOV     A,#0x4e
   \   0001AB   12....       LCALL   ?XSTACK_DISP0_8
   \   0001AE   AA82         MOV     R2,DPL
   \   0001B0   AB83         MOV     R3,DPH
   \   0001B2   7900         MOV     R1,#0x0
   \   0001B4   12....       LCALL   ??HalUARTWrite?relay
    722                  sprintf(convert_arr,"%d\r\n",pkt->cmd.DataLength) ;                       //转换为字符串
   \   0001B7   E5..         MOV     A,?V0 + 0
   \   0001B9   2420         ADD     A,#0x20
   \   0001BB   FE           MOV     R6,A
   \   0001BC   E5..         MOV     A,?V0 + 1
   \   0001BE   3400         ADDC    A,#0x0
   \   0001C0   FF           MOV     R7,A
   \   0001C1                ; Setup parameters for call to function sprintf
   \   0001C1   8E82         MOV     DPL,R6
   \   0001C3   8F83         MOV     DPH,R7
   \   0001C5   12....       LCALL   ?PUSH_XSTACK8_X_TWO
   \   0001C8   7C..         MOV     R4,#`?<Constant "%d\\r\\n">` & 0xff
   \   0001CA   7D..         MOV     R5,#(`?<Constant "%d\\r\\n">` >> 8) & 0xff
   \   0001CC   7403         MOV     A,#0x3
   \   0001CE   12....       LCALL   ?XSTACK_DISP0_8
   \   0001D1   12....       LCALL   ?Subroutine13 & 0xFFFF
   \                     ??CrossCallReturnLabel_16:
   \   0001D4   12....       LCALL   ?DEALLOC_XSTACK8
    723                  HalUARTWrite(0,(unsigned char*)convert_arr,strlen(convert_arr));          //输出
   \   0001D7                ; Setup parameters for call to function HalUARTWrite
   \   0001D7                ; Setup parameters for call to function strlen
   \   0001D7   7401         MOV     A,#0x1
   \   0001D9   12....       LCALL   ?XSTACK_DISP0_8
   \   0001DC   12....       LCALL   ?Subroutine17 & 0xFFFF
   \                     ??CrossCallReturnLabel_30:
   \   0001DF   12....       LCALL   ?XSTACK_DISP0_8
   \   0001E2   AA82         MOV     R2,DPL
   \   0001E4   AB83         MOV     R3,DPH
   \   0001E6   7900         MOV     R1,#0x0
   \   0001E8   12....       LCALL   ??HalUARTWrite?relay
    724                  //pkt->    数据
    725                  HalUARTWrite(0,Dis_arr18,sizeof(Dis_arr18)-1);                            //提示已经收到点播信息，
   \   0001EB                ; Setup parameters for call to function HalUARTWrite
   \   0001EB   7C0A         MOV     R4,#0xa
   \   0001ED   7D00         MOV     R5,#0x0
   \   0001EF   7424         MOV     A,#0x24
   \   0001F1   12....       LCALL   ?XSTACK_DISP0_8
   \   0001F4   12....       LCALL   ?Subroutine8 & 0xFFFF
    726                  HalUARTWrite(0,pkt->cmd.Data,pkt->cmd.DataLength);                        //输出
   \                     ??CrossCallReturnLabel_10:
   \   0001F7   FC           MOV     R4,A
   \   0001F8   A3           INC     DPTR
   \   0001F9   E0           MOVX    A,@DPTR
   \   0001FA   FD           MOV     R5,A
   \   0001FB   12....       LCALL   ??Subroutine30_0 & 0xFFFF
    727                  HalUARTWrite(0,"\r\n\r\n",4);                                                 //换行，便于观察
   \                     ??CrossCallReturnLabel_57:
   \   0001FE                ; Setup parameters for call to function HalUARTWrite
   \   0001FE   7C04         MOV     R4,#0x4
   \   000200   7D00         MOV     R5,#0x0
   \   000202   7A..         MOV     R2,#`?<Constant "\\r\\n\\r\\n">` & 0xff
   \   000204   7B..         MOV     R3,#(`?<Constant "\\r\\n\\r\\n">` >> 8) & 0xff
   \                     ??SampleApp_MessageMSGCB_6:
   \   000206   7900         MOV     R1,#0x0
   \   000208   12....       LCALL   ??HalUARTWrite?relay
    728                  break;
   \   00020B   02....       LJMP    ??SampleApp_MessageMSGCB_0 & 0xFFFF
    729              case SAMPLEAPP_PERIODIC_CLUSTERID:
    730                //在这里加入你想怎样处理周期广播发送过来的数据的程序
    731                HalUARTWrite(0,"I get data\n",1);//提示已经进入了这个函数
   \                     ??SampleApp_MessageMSGCB_1:
   \   00020E                ; Setup parameters for call to function HalUARTWrite
   \   00020E   7C01         MOV     R4,#0x1
   \   000210   7D00         MOV     R5,#0x0
   \   000212   7A..         MOV     R2,#`?<Constant "I get data\\n">` & 0xff
   \   000214   7B..         MOV     R3,#(`?<Constant "I get data\\n">` >> 8) & 0xff
   \   000216   7900         MOV     R1,#0x0
   \   000218   12....       LCALL   ??HalUARTWrite?relay
    732                HalUARTWrite(0,(pkt->cmd.Data),12); //将接收到的数据打印出来
   \   00021B                ; Setup parameters for call to function HalUARTWrite
   \   00021B   7C0C         MOV     R4,#0xc
   \   00021D   12....       LCALL   ?Subroutine11 & 0xFFFF
    733                HalUARTWrite(0,"\n",1);//换行，便于观察
   \                     ??CrossCallReturnLabel_55:
   \   000220                ; Setup parameters for call to function HalUARTWrite
   \   000220   7C01         MOV     R4,#0x1
   \   000222   7D00         MOV     R5,#0x0
   \   000224   7A..         MOV     R2,#`?<Constant "\\n">` & 0xff
   \   000226   7B..         MOV     R3,#(`?<Constant "\\n">` >> 8) & 0xff
   \   000228   80DC         SJMP    ??SampleApp_MessageMSGCB_6
    734                break;
    735          
    736              case SAMPLEAPP_FLASH_CLUSTERID:
    737                flashTime = BUILD_UINT16(pkt->cmd.Data[1], pkt->cmd.Data[2] );
    738                HalLedBlink( HAL_LED_4, 4, 50, (flashTime / 4) );
   \                     ??SampleApp_MessageMSGCB_2:
   \   00022A   EA           MOV     A,R2
   \   00022B   2422         ADD     A,#0x22
   \   00022D   FE           MOV     R6,A
   \   00022E   EB           MOV     A,R3
   \   00022F   3400         ADDC    A,#0x0
   \   000231   FF           MOV     R7,A
   \   000232   12....       LCALL   ?Subroutine15 & 0xFFFF
   \                     ??CrossCallReturnLabel_21:
   \   000235   E0           MOVX    A,@DPTR
   \   000236   FA           MOV     R2,A
   \   000237   8882         MOV     DPL,R0
   \   000239   8983         MOV     DPH,R1
   \   00023B   12....       LCALL   ?Subroutine14 & 0xFFFF
   \                     ??CrossCallReturnLabel_19:
   \   00023E   7402         MOV     A,#0x2
   \   000240   78..         MOV     R0,#?V0 + 0
   \   000242   12....       LCALL   ?US_SHR
   \   000245   AC..         MOV     R4,?V0 + 0
   \   000247   AD..         MOV     R5,?V0 + 1
   \   000249   7B32         MOV     R3,#0x32
   \   00024B   7A04         MOV     R2,#0x4
   \   00024D   7908         MOV     R1,#0x8
   \   00024F   12....       LCALL   ??HalLedBlink?relay
    739                break;
   \   000252   02....       LJMP    ??SampleApp_MessageMSGCB_0 & 0xFFFF
    740              //无线点灯
    741              case SAMPLEAPP_LEDSTATUS_CLUSTERID:
    742                LedStatus =  *(pkt->cmd.Data) +'0';
   \                     ??SampleApp_MessageMSGCB_3:
   \   000255   12....       LCALL   ?Subroutine12 & 0xFFFF
   \                     ??CrossCallReturnLabel_49:
   \   000258   2430         ADD     A,#0x30
   \   00025A   85..82       MOV     DPL,?XSP + 0
   \   00025D   85..83       MOV     DPH,?XSP + 1
   \   000260   F0           MOVX    @DPTR,A
    743                HalUARTWrite(0,&LedStatus,1);       //将接收到的数据打印出来
   \   000261                ; Setup parameters for call to function HalUARTWrite
   \   000261   7C01         MOV     R4,#0x1
   \   000263   7D00         MOV     R5,#0x0
   \   000265   12....       LCALL   ?Subroutine8 & 0xFFFF
    744                if(*(pkt->cmd.Data))
   \                     ??CrossCallReturnLabel_11:
   \   000268   12....       LCALL   ??Subroutine29_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_51:
   \   00026B   E0           MOVX    A,@DPTR
   \   00026C   6005         JZ      ??SampleApp_MessageMSGCB_7
    745                 HAL_TURN_ON_LED1();
   \   00026E   C290         CLR     0x90.0
   \   000270   02....       LJMP    ??SampleApp_MessageMSGCB_0 & 0xFFFF
    746                else
    747                 HAL_TURN_OFF_LED1();
   \                     ??SampleApp_MessageMSGCB_7:
   \   000273   D290         SETB    0x90.0
   \   000275   02....       LJMP    ??SampleApp_MessageMSGCB_0 & 0xFFFF
    748                break;
    749          
    750            case SAMPLEAPP_GAS_SENSOR_CLUSTERID:
    751                i=0;                                                           //用于记录数据包的计数子
    752                char EDid=0;
    753                EDid=(pkt->cmd.Data)[13];
   \                     ??SampleApp_MessageMSGCB_5:
   \   000278   EA           MOV     A,R2
   \   000279   2422         ADD     A,#0x22
   \   00027B   F582         MOV     DPL,A
   \   00027D   EB           MOV     A,R3
   \   00027E   12....       LCALL   ??Subroutine27_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_59:
   \   000281   240D         ADD     A,#0xd
   \   000283   F8           MOV     R0,A
   \   000284   A3           INC     DPTR
   \   000285   E0           MOVX    A,@DPTR
   \   000286   3400         ADDC    A,#0x0
   \   000288   F9           MOV     R1,A
   \   000289   8882         MOV     DPL,R0
   \   00028B   8983         MOV     DPH,R1
   \   00028D   E0           MOVX    A,@DPTR
   \   00028E   F8           MOV     R0,A
    754                if(EDid==1&&contin==0)
   \   00028F   7401         MOV     A,#0x1
   \   000291   68           XRL     A,R0
   \   000292   6003         JZ      $+5
   \   000294   02....       LJMP    ??SampleApp_MessageMSGCB_8 & 0xFFFF
   \   000297   90....       MOV     DPTR,#contin
   \   00029A   E0           MOVX    A,@DPTR
   \   00029B   6003         JZ      $+5
   \   00029D   02....       LJMP    ??SampleApp_MessageMSGCB_0 & 0xFFFF
    755                {
    756                    //显示收到的数据量
    757                //   sprintf(convert_arr,"DataLength:%d\r\n",pkt->cmd.DataLength);
    758                //   HalUARTWrite(0,convert_arr,strlen(convert_arr));
    759                
    760                    //公共数据包，温湿度数据+状态位
    761                    sprintf(convert_arr,"TEMP：%d C\r\n",(pkt->cmd.Data)[i]),i++;
   \   0002A0   12....       LCALL   ?Subroutine12 & 0xFFFF
   \                     ??CrossCallReturnLabel_50:
   \   0002A3   F5..         MOV     ?V0 + 2,A
   \   0002A5   75..00       MOV     ?V0 + 3,#0x0
   \   0002A8   78..         MOV     R0,#?V0 + 2
   \   0002AA   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0002AD   7C..         MOV     R4,#`?<Constant "TEMP\\243\\272%d C\\r\\n">` & 0xff
   \   0002AF   7D..         MOV     R5,#(`?<Constant "TEMP\\243\\272%d C\\r\\n">` >> 8) & 0xff
   \   0002B1   7403         MOV     A,#0x3
   \   0002B3   12....       LCALL   ?XSTACK_DISP0_8
   \   0002B6   12....       LCALL   ?Subroutine13 & 0xFFFF
   \                     ??CrossCallReturnLabel_17:
   \   0002B9   12....       LCALL   ?DEALLOC_XSTACK8
    762                    HalUARTWrite(0,convert_arr,strlen(convert_arr));
                                          ^
Warning[Pe167]: argument of type "char *" is incompatible with parameter of
          type "unsigned char *"
   \   0002BC                ; Setup parameters for call to function HalUARTWrite
   \   0002BC                ; Setup parameters for call to function strlen
   \   0002BC   7401         MOV     A,#0x1
   \   0002BE   12....       LCALL   ?XSTACK_DISP0_8
   \   0002C1   12....       LCALL   ?Subroutine17 & 0xFFFF
   \                     ??CrossCallReturnLabel_31:
   \   0002C4   12....       LCALL   ?XSTACK_DISP0_8
   \   0002C7   12....       LCALL   ?Subroutine5 & 0xFFFF
    763                    sprintf(convert_arr,"HUMI：%dRH\r\n",(pkt->cmd.Data)[i]),i++;
   \                     ??CrossCallReturnLabel_4:
   \   0002CA   E0           MOVX    A,@DPTR
   \   0002CB   F5..         MOV     ?V0 + 2,A
   \   0002CD   78..         MOV     R0,#?V0 + 2
   \   0002CF   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0002D2   7C..         MOV     R4,#`?<Constant "HUMI\\243\\272%dRH\\r\\n">` & 0xff
   \   0002D4   7D..         MOV     R5,#(`?<Constant "HUMI\\243\\272%dRH\\r\\n">` >> 8) & 0xff
   \   0002D6   7403         MOV     A,#0x3
   \   0002D8   12....       LCALL   ?XSTACK_DISP0_8
   \   0002DB   12....       LCALL   ?Subroutine13 & 0xFFFF
   \                     ??CrossCallReturnLabel_18:
   \   0002DE   12....       LCALL   ?DEALLOC_XSTACK8
    764                    HalUARTWrite(0,convert_arr,strlen(convert_arr));
                                          ^
Warning[Pe167]: argument of type "char *" is incompatible with parameter of
          type "unsigned char *"
   \   0002E1                ; Setup parameters for call to function HalUARTWrite
   \   0002E1                ; Setup parameters for call to function strlen
   \   0002E1   7401         MOV     A,#0x1
   \   0002E3   12....       LCALL   ?XSTACK_DISP0_8
   \   0002E6   12....       LCALL   ?Subroutine17 & 0xFFFF
   \                     ??CrossCallReturnLabel_32:
   \   0002E9   12....       LCALL   ?XSTACK_DISP0_8
   \   0002EC   12....       LCALL   ?Subroutine5 & 0xFFFF
    765                
    766                    //判断标志位，并给出提示信息
    767                    //DHT出错
    768                    if((pkt->cmd.Data)[i++] & (1<<0))
   \                     ??CrossCallReturnLabel_5:
   \   0002EF   A3           INC     DPTR
   \   0002F0   E0           MOVX    A,@DPTR
   \   0002F1   A2E0         MOV     C,0xE0 /* A   */.0
   \   0002F3   500D         JNC     ??SampleApp_MessageMSGCB_9
    769                    {
    770                      HalUARTWrite(0,"DHT11 Error!\r\n",strlen("DHT11 Error!\r\n"));
   \   0002F5                ; Setup parameters for call to function HalUARTWrite
   \   0002F5   7C0E         MOV     R4,#0xe
   \   0002F7   7D00         MOV     R5,#0x0
   \   0002F9   7A..         MOV     R2,#`?<Constant "DHT11 Error!\\r\\n">` & 0xff
   \   0002FB   7B..         MOV     R3,#(`?<Constant "DHT11 Error!\\r\\n">` >> 8) & 0xff
   \   0002FD   7900         MOV     R1,#0x0
   \   0002FF   12....       LCALL   ??HalUARTWrite?relay
    771                    }
    772                
    773                #if (defined Channel_0_GasSensor_Busy)
    774                    //通道0（P0.0）数据包(电压值加浓度值)+标志位
    775                    Channel0_VolSave =  (float)BUILD_UINT16((pkt->cmd.Data)[i+1],(pkt->cmd.Data)[i])/1000;
    776                    sprintf(convert_arr,"vol0：%.3fV\r\n",Channel0_VolSave),i+=2;
    777                    HalUARTWrite(0,convert_arr,strlen(convert_arr));
    778                    if(Channel0_VolSave < TGS822_Safe)
    779                      sprintf(convert_arr,"Level: 没有污染\r\n");
    780                    else if(Channel0_VolSave < TGS822_Mildly)
    781                      sprintf(convert_arr,"Level: 轻度污染\r\n");
    782                    else if(Channel0_VolSave < TGS822_Moderate)
    783                      sprintf(convert_arr,"Level: 中度污染\r\n");
    784                    else if(Channel0_VolSave < TGS822_Severe)
    785                      sprintf(convert_arr,"Level: 重度污染\r\n");
    786                    else
    787                      sprintf(convert_arr,"Level: 重度污染\r\n");
    788                    HalUARTWrite(0,convert_arr,strlen(convert_arr));
    789                    //    sprintf(convert_arr,"concen0：%dppm\r\n",BUILD_UINT16((pkt->cmd.Data)[i+1],(pkt->cmd.Data)[i])),i+=2;
    790                //    HalUARTWrite(0,convert_arr,strlen(convert_arr));
    791                //    sprintf(convert_arr,"Flag0:0x%x\r\n",(pkt->cmd.Data)[i]),i++;
    792                //    HalUARTWrite(0,convert_arr,strlen(convert_arr));
    793                #endif
    794                
    795                #if (defined Channel_1_GasSensor_Busy)
    796                    //通道1（P0.4）数据包(电压值加浓度值)+标志位
    797                    sprintf(convert_arr,"vol1：%.3fV\r\n",(float)BUILD_UINT16((pkt->cmd.Data)[i+1],(pkt->cmd.Data)[i])/1000),i+=2;
   \                     ??SampleApp_MessageMSGCB_9:
   \   000302   12....       LCALL   ?Subroutine15 & 0xFFFF
   \                     ??CrossCallReturnLabel_22:
   \   000305   A3           INC     DPTR
   \   000306   A3           INC     DPTR
   \   000307   A3           INC     DPTR
   \   000308   E0           MOVX    A,@DPTR
   \   000309   FA           MOV     R2,A
   \   00030A   8882         MOV     DPL,R0
   \   00030C   8983         MOV     DPH,R1
   \   00030E   A3           INC     DPTR
   \   00030F   12....       LCALL   ?Subroutine14 & 0xFFFF
   \                     ??CrossCallReturnLabel_20:
   \   000312   E4           CLR     A
   \   000313   F5..         MOV     ?V0 + 2,A
   \   000315   78..         MOV     R0,#?V0 + 0
   \   000317   12....       LCALL   ?UL_TO_FLT
   \   00031A   90....       MOV     DPTR,#__Constant_447a0000
   \   00031D   78..         MOV     R0,#?V0 + 4
   \   00031F   12....       LCALL   ?L_MOV_X
   \   000322   78..         MOV     R0,#?V0 + 0
   \   000324   79..         MOV     R1,#?V0 + 4
   \   000326   12....       LCALL   ?FLT_DIV
   \   000329   78..         MOV     R0,#?V0 + 0
   \   00032B   12....       LCALL   ?PUSH_XSTACK_I_FOUR
   \   00032E   7C..         MOV     R4,#`?<Constant "vol1\\243\\272%.3fV\\r\\n">` & 0xff
   \   000330   7D..         MOV     R5,#(`?<Constant "vol1\\243\\272%.3fV\\r\\n">` >> 8) & 0xff
   \   000332   7405         MOV     A,#0x5
   \   000334   12....       LCALL   ?XSTACK_DISP0_8
   \   000337   12....       LCALL   ?Subroutine16 & 0xFFFF
   \                     ??CrossCallReturnLabel_26:
   \   00033A   12....       LCALL   ?DEALLOC_XSTACK8
    798                    HalUARTWrite(0,convert_arr,strlen(convert_arr));
                                          ^
Warning[Pe167]: argument of type "char *" is incompatible with parameter of
          type "unsigned char *"

    float Channel0_VolSave = 0.0f;
          ^
"C:\Users\Administrator\Desktop\TENZ组播 改2\Projects\zstack\Samples\SampleApp\Source\SampleApp.c",691  Warning[Pe177]: 
          variable "Channel0_VolSave" was declared but never referenced

    uint8 GeneralFlagSave=0;                //保存发送过来的总接收标志位
          ^
"C:\Users\Administrator\Desktop\TENZ组播 改2\Projects\zstack\Samples\SampleApp\Source\SampleApp.c",693  Warning[Pe177]: 
          variable "GeneralFlagSave" was declared but never referenced
   \   00033D                ; Setup parameters for call to function HalUARTWrite
   \   00033D                ; Setup parameters for call to function strlen
   \   00033D   7401         MOV     A,#0x1
   \   00033F   12....       LCALL   ?XSTACK_DISP0_8
   \   000342   12....       LCALL   ?Subroutine17 & 0xFFFF
    799                //    sprintf(convert_arr,"concen1：%dppm\r\n",BUILD_UINT16((pkt->cmd.Data)[i+1],(pkt->cmd.Data)[i])),i+=2;
    800                //    HalUARTWrite(0,convert_arr,strlen(convert_arr));
    801                //    sprintf(convert_arr,"Flag1:0x%x\r\n",(pkt->cmd.Data)[i]),i++;
    802                //   HalUARTWrite(0,convert_arr,strlen(convert_arr));
    803                #endif
    804                    
    805                    HalUARTWrite(0,"\r\n",2);
    806                    EDid=0;
    807                    contin=1;
    808                }
   \                     ??CrossCallReturnLabel_33:
   \   000345   12....       LCALL   ?XSTACK_DISP0_8
   \   000348   AA82         MOV     R2,DPL
   \   00034A   AB83         MOV     R3,DPH
   \   00034C   12....       LCALL   ?Subroutine4 & 0xFFFF
   \                     ??CrossCallReturnLabel_2:
   \   00034F   7401         MOV     A,#0x1
   \   000351   802B         SJMP    ??SampleApp_MessageMSGCB_10
    809                if(EDid==2&&contin==1)
   \                     ??SampleApp_MessageMSGCB_8:
   \   000353   7402         MOV     A,#0x2
   \   000355   68           XRL     A,R0
   \   000356   7027         JNZ     ??SampleApp_MessageMSGCB_0
   \   000358   90....       MOV     DPTR,#contin
   \   00035B   E0           MOVX    A,@DPTR
   \   00035C   6401         XRL     A,#0x1
   \   00035E   701F         JNZ     ??SampleApp_MessageMSGCB_0
    810                {
    811                  HalUARTWrite(0, "PM2.5:", 6);
   \   000360                ; Setup parameters for call to function HalUARTWrite
   \   000360   7C06         MOV     R4,#0x6
   \   000362   7D00         MOV     R5,#0x0
   \   000364   7A..         MOV     R2,#`?<Constant "PM2.5:">` & 0xff
   \   000366   7B..         MOV     R3,#(`?<Constant "PM2.5:">` >> 8) & 0xff
   \   000368   7900         MOV     R1,#0x0
   \   00036A   12....       LCALL   ??HalUARTWrite?relay
    812                //  HalUARTWrite(0, "\r\n", 2);         //回车换行
    813                  HalUARTWrite(0, pkt->cmd.Data, 6); //输出接收到的数据
   \   00036D                ; Setup parameters for call to function HalUARTWrite
   \   00036D   7C06         MOV     R4,#0x6
   \   00036F   12....       LCALL   ?Subroutine11 & 0xFFFF
    814                  HalUARTWrite(0, "ug/m3", 5);
   \                     ??CrossCallReturnLabel_56:
   \   000372                ; Setup parameters for call to function HalUARTWrite
   \   000372   7C05         MOV     R4,#0x5
   \   000374   7D00         MOV     R5,#0x0
   \   000376   7A..         MOV     R2,#`?<Constant "ug/m3">` & 0xff
   \   000378   7B..         MOV     R3,#(`?<Constant "ug/m3">` >> 8) & 0xff
   \   00037A   12....       LCALL   ?Subroutine4 & 0xFFFF
    815                  HalUARTWrite(0, "\r\n", 2);         //回车换行
    816                  EDid=0;
    817                  contin=0;
    818                }
    819              break;
    820            }
   \                     ??CrossCallReturnLabel_3:
   \   00037D   E4           CLR     A
   \                     ??SampleApp_MessageMSGCB_10:
   \   00037E   F0           MOVX    @DPTR,A
    821          }
   \                     ??SampleApp_MessageMSGCB_0:
   \   00037F   745F         MOV     A,#0x5f
   \   000381   02....       LJMP    ??Subroutine24_0 & 0xFFFF
   \   000384                REQUIRE _A_P1

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine23:
   \   000000   F582         MOV     DPL,A
   \   000002   E5..         MOV     A,?V0 + 1
   \   000004                REQUIRE ??Subroutine27_0
   \   000004                ; // Fall through to label ??Subroutine27_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine17:
   \   000000   12....       LCALL   ?Subroutine21 & 0xFFFF
   \                     ??CrossCallReturnLabel_41:
   \   000003   7401         MOV     A,#0x1
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine15:
   \   000000   8E82         MOV     DPL,R6
   \   000002   8F83         MOV     DPH,R7
   \   000004   E0           MOVX    A,@DPTR
   \   000005   F8           MOV     R0,A
   \   000006   A3           INC     DPTR
   \   000007   E0           MOVX    A,@DPTR
   \   000008   F9           MOV     R1,A
   \   000009                ; Setup parameters for call to function HalLedBlink
   \   000009                ; Setup parameters for call to function sprintf
   \   000009   8882         MOV     DPL,R0
   \   00000B   8983         MOV     DPH,R1
   \   00000D   A3           INC     DPTR
   \   00000E   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine14:
   \   000000   A3           INC     DPTR
   \   000001   A3           INC     DPTR
   \   000002   E0           MOVX    A,@DPTR
   \   000003   F9           MOV     R1,A
   \   000004   EA           MOV     A,R2
   \   000005   2400         ADD     A,#0x0
   \   000007   F5..         MOV     ?V0 + 0,A
   \   000009   E4           CLR     A
   \   00000A   39           ADDC    A,R1
   \   00000B   F5..         MOV     ?V0 + 1,A
   \   00000D   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine12:
   \   000000   EA           MOV     A,R2
   \   000001   2422         ADD     A,#0x22
   \   000003   FE           MOV     R6,A
   \   000004   EB           MOV     A,R3
   \   000005   3400         ADDC    A,#0x0
   \   000007   FF           MOV     R7,A
   \   000008                ; Setup parameters for call to function sprintf
   \   000008   8E82         MOV     DPL,R6
   \   00000A   8F83         MOV     DPH,R7
   \   00000C                REQUIRE ??Subroutine28_0
   \   00000C                ; // Fall through to label ??Subroutine28_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine28_0:
   \   000000   12....       LCALL   ?Subroutine22 & 0xFFFF
   \                     ??CrossCallReturnLabel_54:
   \   000003   E0           MOVX    A,@DPTR
   \   000004   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine22:
   \   000000   E0           MOVX    A,@DPTR
   \   000001                REQUIRE ??Subroutine29_0
   \   000001                ; // Fall through to label ??Subroutine29_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine29_0:
   \   000000   F8           MOV     R0,A
   \   000001   A3           INC     DPTR
   \   000002   E0           MOVX    A,@DPTR
   \   000003   F583         MOV     DPH,A
   \   000005   8882         MOV     DPL,R0
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine11:
   \   000000   7D00         MOV     R5,#0x0
   \   000002                REQUIRE ??Subroutine30_0
   \   000002                ; // Fall through to label ??Subroutine30_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine30_0:
   \   000000   E5..         MOV     A,?V0 + 0
   \   000002   2422         ADD     A,#0x22
   \   000004   12....       LCALL   ?Subroutine23 & 0xFFFF
   \                     ??CrossCallReturnLabel_61:
   \   000007   FA           MOV     R2,A
   \   000008   A3           INC     DPTR
   \   000009   E0           MOVX    A,@DPTR
   \   00000A   FB           MOV     R3,A
   \   00000B   7900         MOV     R1,#0x0
   \   00000D   12....       LCALL   ??HalUARTWrite?relay
   \   000010   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine8:
   \   000000   12....       LCALL   ?Subroutine20 & 0xFFFF
   \                     ??CrossCallReturnLabel_36:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine20:
   \   000000   AA82         MOV     R2,DPL
   \   000002   AB83         MOV     R3,DPH
   \   000004   7900         MOV     R1,#0x0
   \   000006   12....       LCALL   ??HalUARTWrite?relay
   \   000009                ; Setup parameters for call to function HalUARTWrite
   \   000009                ; Setup parameters for call to function sprintf
   \   000009   8E82         MOV     DPL,R6
   \   00000B   8F83         MOV     DPH,R7
   \   00000D   E0           MOVX    A,@DPTR
   \   00000E   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine5:
   \   000000   12....       LCALL   ?Subroutine20 & 0xFFFF
   \                     ??CrossCallReturnLabel_37:
   \   000003   12....       LCALL   ??Subroutine29_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_52:
   \   000006   A3           INC     DPTR
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine4:
   \   000000   7900         MOV     R1,#0x0
   \   000002   12....       LCALL   ??HalUARTWrite?relay
   \   000005                ; Setup parameters for call to function HalUARTWrite
   \   000005                ; Setup parameters for call to function HalUARTWrite
   \   000005   7C02         MOV     R4,#0x2
   \   000007   7D00         MOV     R5,#0x0
   \   000009   7A..         MOV     R2,#`?<Constant "\\r\\n">` & 0xff
   \   00000B   7B..         MOV     R3,#(`?<Constant "\\r\\n">` >> 8) & 0xff
   \   00000D   7900         MOV     R1,#0x0
   \   00000F   12....       LCALL   ??HalUARTWrite?relay
   \   000012   90....       MOV     DPTR,#contin
   \   000015   22           RET
    822          
    823          /*********************************************************************
    824           * @fn      SampleApp_SendPointMessage
    825           *
    826           * @brief   Send the point to point message.
    827           *
    828           * @param   none
    829           *
    830           * @return  none
    831           *
    832           * @time&author huang 2016 8 2
    833           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    834          void SampleApp_SendPointMessage( void )
   \                     SampleApp_SendPointMessage:
    835          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 14
   \   000005   74F2         MOV     A,#-0xe
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    836            uint8 test_arr[]="RSSI Testing.";
   \   00000A   85..82       MOV     DPL,?XSP + 0
   \   00000D   85..83       MOV     DPH,?XSP + 1
   \   000010   AC82         MOV     R4,DPL
   \   000012   AD83         MOV     R5,DPH
   \   000014   7583..       MOV     DPH,#(`?<Constant "RSSI Testing.">` >> 8) & 0xff
   \   000017   7582..       MOV     DPL,#`?<Constant "RSSI Testing.">` & 0xff
   \   00001A   740E         MOV     A,#0xe
   \   00001C   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
    837            if ( AF_DataRequest( &SampleApp_Point_To_Point_DstAddr, &SampleApp_epDesc,//地址改变
    838                                 SAMPLEAPP_POINT_CLUSTERID,                           //簇ID改变
    839                                 sizeof(test_arr)-1,                                 //数组长度
    840                                 test_arr,                                           //需要发送的数组
    841                                 &SampleApp_TransID,                                 //序列号，会自动增加
    842                                 AF_DISCV_ROUTE,                                     //发送选项
    843                                 AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )           //发送的路由半径
   \   00001F                ; Setup parameters for call to function AF_DataRequest
   \   00001F   75..1E       MOV     ?V0 + 0,#0x1e
   \   000022   78..         MOV     R0,#?V0 + 0
   \   000024   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000027   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   00002A   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   00002D   78..         MOV     R0,#?V0 + 0
   \   00002F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000032   7403         MOV     A,#0x3
   \   000034   12....       LCALL   ?XSTACK_DISP0_8
   \   000037   8582..       MOV     ?V0 + 0,DPL
   \   00003A   8583..       MOV     ?V0 + 1,DPH
   \   00003D   78..         MOV     R0,#?V0 + 0
   \   00003F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000042   75..0D       MOV     ?V0 + 0,#0xd
   \   000045   75..00       MOV     ?V0 + 1,#0x0
   \   000048   78..         MOV     R0,#?V0 + 0
   \   00004A   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00004D   75..05       MOV     ?V0 + 0,#0x5
   \   000050   78..         MOV     R0,#?V0 + 0
   \   000052   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000055   12....       LCALL   ?Subroutine18 & 0xFFFF
   \                     ??CrossCallReturnLabel_63:
   \   000058   12....       LCALL   ?DEALLOC_XSTACK8
    844            {
    845            }
    846            else
    847            {
    848              // Error occurred in request to send.
    849            }
    850          }
   \   00005B   740E         MOV     A,#0xe
   \   00005D                REQUIRE ?Subroutine2
   \   00005D                ; // Fall through to label ?Subroutine2

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine2:
   \   000000   12....       LCALL   ?DEALLOC_XSTACK8
   \   000003   7F02         MOV     R7,#0x2
   \   000005   02....       LJMP    ?BANKED_LEAVE_XDATA
    851          /*********************************************************************
    852           * @fn      SampleApp_SendPeriodicMessage
    853           *
    854           * @brief   Send the periodic message.
    855           *
    856           * @param   none
    857           *
    858           * @return  none
    859           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    860          void SampleApp_SendPeriodicMessage( void )
   \                     SampleApp_SendPeriodicMessage:
    861          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
    862            if ( AF_DataRequest( &SampleApp_Periodic_DstAddr, &SampleApp_epDesc,
    863                                 SAMPLEAPP_PERIODIC_CLUSTERID, //与接收方建立联系的参数，如1，表示由周期性广播方式发送过来的数据
    864                                 1,                            //数据量（长度）
    865                                 (uint8*)&SampleAppPeriodicCounter,//数据首地址
    866                                 &SampleApp_TransID,
    867                                 AF_DISCV_ROUTE,
    868                                 AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   000005                ; Setup parameters for call to function AF_DataRequest
   \   000005   75..1E       MOV     ?V0 + 0,#0x1e
   \   000008   78..         MOV     R0,#?V0 + 0
   \   00000A   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00000D   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   000010   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   000013   78..         MOV     R0,#?V0 + 0
   \   000015   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000018   75....       MOV     ?V0 + 0,#SampleAppPeriodicCounter & 0xff
   \   00001B   75....       MOV     ?V0 + 1,#(SampleAppPeriodicCounter >> 8) & 0xff
   \   00001E   78..         MOV     R0,#?V0 + 0
   \   000020   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000023   75..01       MOV     ?V0 + 0,#0x1
   \   000026   75..00       MOV     ?V0 + 1,#0x0
   \   000029   78..         MOV     R0,#?V0 + 0
   \   00002B   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00002E   78..         MOV     R0,#?V0 + 0
   \   000030   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000033   7920         MOV     R1,#0x20
   \   000035   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   000037   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   000039   7A..         MOV     R2,#SampleApp_Periodic_DstAddr & 0xff
   \   00003B   7B..         MOV     R3,#(SampleApp_Periodic_DstAddr >> 8) & 0xff
   \   00003D   12....       LCALL   ??Subroutine31_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_64:
   \   000040   80..         SJMP    ?Subroutine2
    869            {
    870            }
    871            else
    872            {
    873              // Error occurred in request to send.
    874            }
    875          }
    876          
    877          /*********************************************************************
    878           * @fn      SampleApp_SendFlashMessage
    879           *
    880           * @brief   Send the flash message to group 1.
    881           *
    882           * @param   flashTime - in milliseconds
    883           *
    884           * @return  none
    885           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    886          void SampleApp_SendFlashMessage( uint16 flashTime )
   \                     SampleApp_SendFlashMessage:
    887          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 3
   \   000005   74FD         MOV     A,#-0x3
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    888            uint8 buffer[3];
    889            buffer[0] = (uint8)(SampleAppFlashCounter++);
   \   00000A   90....       MOV     DPTR,#SampleAppFlashCounter
   \   00000D   E0           MOVX    A,@DPTR
   \   00000E   85..82       MOV     DPL,?XSP + 0
   \   000011   85..83       MOV     DPH,?XSP + 1
   \   000014   F0           MOVX    @DPTR,A
   \   000015   90....       MOV     DPTR,#SampleAppFlashCounter
   \   000018   E0           MOVX    A,@DPTR
   \   000019   04           INC     A
   \   00001A   F0           MOVX    @DPTR,A
    890            buffer[1] = LO_UINT16( flashTime );
   \   00001B   7401         MOV     A,#0x1
   \   00001D   12....       LCALL   ?XSTACK_DISP0_8
   \   000020   EA           MOV     A,R2
   \   000021   F0           MOVX    @DPTR,A
    891            buffer[2] = HI_UINT16( flashTime );
   \   000022   7402         MOV     A,#0x2
   \   000024   12....       LCALL   ?XSTACK_DISP0_8
   \   000027   EB           MOV     A,R3
   \   000028   F0           MOVX    @DPTR,A
    892          
    893            if ( AF_DataRequest( &SampleApp_Flash_DstAddr, &SampleApp_epDesc,
    894                                 SAMPLEAPP_FLASH_CLUSTERID,
    895                                 3,
    896                                 buffer,
    897                                 &SampleApp_TransID,
    898                                 AF_DISCV_ROUTE,
    899                                 AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   000029                ; Setup parameters for call to function AF_DataRequest
   \   000029   75..1E       MOV     ?V0 + 0,#0x1e
   \   00002C   78..         MOV     R0,#?V0 + 0
   \   00002E   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000031   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   000034   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   000037   78..         MOV     R0,#?V0 + 0
   \   000039   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00003C   7403         MOV     A,#0x3
   \   00003E   12....       LCALL   ?XSTACK_DISP0_8
   \   000041   8582..       MOV     ?V0 + 0,DPL
   \   000044   8583..       MOV     ?V0 + 1,DPH
   \   000047   78..         MOV     R0,#?V0 + 0
   \   000049   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00004C   75..03       MOV     ?V0 + 0,#0x3
   \   00004F   75..00       MOV     ?V0 + 1,#0x0
   \   000052   78..         MOV     R0,#?V0 + 0
   \   000054   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000057   75..02       MOV     ?V0 + 0,#0x2
   \   00005A   78..         MOV     R0,#?V0 + 0
   \   00005C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00005F   7920         MOV     R1,#0x20
   \   000061   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   000063   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   000065   7A..         MOV     R2,#SampleApp_Flash_DstAddr & 0xff
   \   000067   7B..         MOV     R3,#(SampleApp_Flash_DstAddr >> 8) & 0xff
   \   000069   12....       LCALL   ??Subroutine31_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_65:
   \   00006C   12....       LCALL   ?DEALLOC_XSTACK8
    900            {
    901            }
    902            else
    903            {
    904              // Error occurred in request to send.
    905            }
    906          }
   \   00006F   7403         MOV     A,#0x3
   \   000071   02....       LJMP    ?Subroutine2 & 0xFFFF
    907          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    908          void SampleAPP_SendGasSensorMessage(void)
   \                     SampleAPP_SendGasSensorMessage:
    909          {
   \   000000   74EC         MOV     A,#-0x14
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 20
   \   000005                ; Auto size: 16
   \   000005   74F0         MOV     A,#-0x10
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    910            
    911            uint8 Transmit_data[14];              //需要发送的数据    包=公共数据(温湿度数据和标志位)+通道0数据和标志+通道1数据和标志，后面两个数据可选
    912            //一个节点 温湿度和酒精
    913            //公共包
    914            
    915            char temp;                   //温度
    916            unsigned char humi;          //湿度
    917            uint8 PublicFlag=0;         //该变量记录了DHT11的状态（是否读取成功)，还可以记录其他状态
    918            Transmit_data[13]=1;//节点1标记
   \   00000A   740F         MOV     A,#0xf
   \   00000C   12....       LCALL   ?XSTACK_DISP0_8
   \   00000F   7401         MOV     A,#0x1
   \   000011   F0           MOVX    @DPTR,A
    919          #if (defined Channel_0_GasSensor_Busy)
    920            float ADC_Channel_0_Vol=0;             //ADC电压
    921            uint16 ADC_Channel_0_Vol_ForTx = 0;    //将电压值乘上1000，用于发送出去
    922            uint16 ADC_Channel_0_RegData;          //ADC寄存器数据
    923            uint16 Channel_0_GasSenDataSave=0;     //保存气体传感器的数据
    924          #endif
    925          #if (defined Channel_1_GasSensor_Busy)
    926            float ADC_Channel_1_Vol=0;             //ADC电压
    927            uint16 ADC_Channel_1_Vol_ForTx = 0;    //将电压值乘上1000，用于发送出去
    928            uint16 ADC_Channel_1_RegData;          //ADC寄存器数据
    929            uint16 Channel_1_GasSenDataSave=0;     //保存气体传感器的数据
    930          #endif
    931          
    932            uint8 i=0;                            //循环要用到
    933            uint8 TxPackLength=0;                 //记录包长度
    934          
    935            PublicFlag =0;                        //清空标志位
   \   000012   7E00         MOV     R6,#0x0
    936          
    937            uint8 ADC_Result_ASCII[20];
    938            //ADC测试结果，使用内部参考电压是最准确的2017 2 19
    939            //注意杜邦线的压降需要补偿，实际电路中，务必测试传感器引脚到ADC引脚的压降，然后软件加以补偿。2017 2 19
    940            //温度传感器  DHT11
    941            //DHT11读取失败，可能DHT11损坏，可能DHT11被拔出或者连线松动
    942              if(dht11_value(&temp , &humi , DHT11_UINT8) != 0)
                                    ^
Warning[Pe167]: argument of type "char *" is incompatible with parameter of
          type "unsigned char *"

    uint8 ADC_Result_ASCII[20];
          ^
"C:\Users\Administrator\Desktop\TENZ组播 改2\Projects\zstack\Samples\SampleApp\Source\SampleApp.c",937  Warning[Pe177]: 
          variable "ADC_Result_ASCII" was declared but never referenced
   \   000014                ; Setup parameters for call to function dht11_value
   \   000014   7902         MOV     R1,#0x2
   \   000016   85..82       MOV     DPL,?XSP + 0
   \   000019   85..83       MOV     DPH,?XSP + 1
   \   00001C   AC82         MOV     R4,DPL
   \   00001E   AD83         MOV     R5,DPH
   \   000020   12....       LCALL   ?XSTACK_DISP0_8
   \   000023   AA82         MOV     R2,DPL
   \   000025   AB83         MOV     R3,DPH
   \   000027   12....       LCALL   ??dht11_value?relay
   \   00002A   E9           MOV     A,R1
   \   00002B   6009         JZ      ??SampleAPP_SendGasSensorMessage_0
    943              {
    944                temp = DHT11_TEMP_DEFAULT;  //设置温湿度为默认值
   \   00002D   7401         MOV     A,#0x1
   \   00002F   12....       LCALL   ?XSTACK_DISP0_8
   \   000032   12....       LCALL   ?Subroutine6 & 0xFFFF
    945                humi = DHT11_HUMI_DEFAULT;
    946                PublicFlag |= (1<<0);     //置位标志位
   \                     ??CrossCallReturnLabel_7:
   \   000035   0E           INC     R6
    947              }
    948              Transmit_data[TxPackLength] = (uint8)temp , TxPackLength++;                     //装入温度,TxPackLength=0
   \                     ??SampleAPP_SendGasSensorMessage_0:
   \   000036   7401         MOV     A,#0x1
   \   000038   12....       LCALL   ?XSTACK_DISP0_8
   \   00003B   E0           MOVX    A,@DPTR
   \   00003C   C0E0         PUSH    A
   \   00003E   7402         MOV     A,#0x2
   \   000040   12....       LCALL   ?XSTACK_DISP0_8
   \   000043   D0E0         POP     A
   \   000045   12....       LCALL   ?Subroutine7 & 0xFFFF
    949              Transmit_data[TxPackLength] = (uint8)humi , TxPackLength++;                     //装入湿度
   \                     ??CrossCallReturnLabel_9:
   \   000048   C0E0         PUSH    A
   \   00004A   7403         MOV     A,#0x3
   \   00004C   12....       LCALL   ?XSTACK_DISP0_8
   \   00004F   D0E0         POP     A
   \   000051   F0           MOVX    @DPTR,A
    950              Transmit_data[TxPackLength] =  PublicFlag , TxPackLength++;                    //装入公共标志位
   \   000052   7404         MOV     A,#0x4
   \   000054   12....       LCALL   ?XSTACK_DISP0_8
   \   000057   EE           MOV     A,R6
   \   000058   F0           MOVX    @DPTR,A
    951          
    952          //如果用到了channe0则编译，使用P0.0，将通道0数据和标志位装入发送包中
    953          #if (defined Channel_0_GasSensor_Busy)
    954              //多次读出ADC的值，然后取平均值
    955              ADC_Channel_0_RegData = HalAdcRead(HAL_ADC_CHANNEL_0,HAL_ADC_RESOLUTION_14);    //选择P0_4,14位分辨率，13位有效数据
    956              for(i=0;i<10;i++)
    957              {
    958                ADC_Channel_0_RegData += HalAdcRead(HAL_ADC_CHANNEL_0,HAL_ADC_RESOLUTION_14);  //选择P0_4,14位分辨率,13位有效数据
    959                ADC_Channel_0_RegData >>=1;                                                    //除以2
    960              }
    961              ADC_Channel_0_Vol =  (float)ADC_Channel_0_RegData*AMS1117_3_ADC_VOL/8192;         //计算得电压值
    962              ADC_Channel_0_Vol_ForTx = (uint16)(ADC_Channel_0_Vol * 1000);
    963          
    964              //Gas sensor获取数据,保存起来
    965              Channel_0_GasSenDataSave = (uint16)PointGetConcentrationForChannel_0(ADC_Channel_0_Vol,temp,humi);
    966          
    967              Transmit_data[TxPackLength] = HI_UINT16(ADC_Channel_0_Vol_ForTx) , TxPackLength++;       //取处理后的电压的值高八位
    968              Transmit_data[TxPackLength] = LO_UINT16(ADC_Channel_0_Vol_ForTx) , TxPackLength++;       //取处理后的电压值的低八位
    969              Transmit_data[TxPackLength] = HI_UINT16(Channel_0_GasSenDataSave) , TxPackLength++;       //装入计算后的气体浓度高八位
    970              Transmit_data[TxPackLength] = LO_UINT16(Channel_0_GasSenDataSave) , TxPackLength++;       //装入计算后的气体浓度低八位
    971              Transmit_data[TxPackLength] = *GasSensorFlagForChannel_0, TxPackLength++;                  //装入标志位
    972          #endif
    973          
    974          //如果用到了channe1则编译，使用P0.4，将通道1数据和标志位装入发送包中
    975          #if (defined Channel_1_GasSensor_Busy)
    976              //多次读出ADC的值，然后取平均值
    977              ADC_Channel_1_RegData = HalAdcRead(HAL_ADC_CHANNEL_4,HAL_ADC_RESOLUTION_14);                    //选择P0_4,14位分辨率，13位有效数据
   \   000059                ; Setup parameters for call to function HalAdcRead
   \   000059   12....       LCALL   ?Subroutine10 & 0xFFFF
    978              for(i=0;i<10;i++)
    979              {
    980                ADC_Channel_1_RegData += HalAdcRead(HAL_ADC_CHANNEL_4,HAL_ADC_RESOLUTION_14);                //选择P0_4,14位分辨率,13位有效数据
    981                ADC_Channel_1_RegData >>=1;                                                                  //除以2
   \                     ??CrossCallReturnLabel_43:
   \   00005C                ; Setup parameters for call to function HalAdcRead
   \   00005C   12....       LCALL   ?Subroutine9 & 0xFFFF
    982              }
   \                     ??CrossCallReturnLabel_46:
   \   00005F   70FB         JNZ     ??CrossCallReturnLabel_43
    983              ADC_Channel_1_Vol =  (float)ADC_Channel_1_RegData*AMS1117_3_ADC_VOL/8192;                       //计算得电压值
   \   000061   8E..         MOV     ?V0 + 0,R6
   \   000063   8F..         MOV     ?V0 + 1,R7
   \   000065   E4           CLR     A
   \   000066   F5..         MOV     ?V0 + 2,A
   \   000068   F5..         MOV     ?V0 + 3,A
   \   00006A   78..         MOV     R0,#?V0 + 0
   \   00006C   12....       LCALL   ?UL_TO_FLT
   \   00006F   90....       MOV     DPTR,#__Constant_4051eb85
   \   000072   78..         MOV     R0,#?V0 + 4
   \   000074   12....       LCALL   ?L_MOV_X
   \   000077   78..         MOV     R0,#?V0 + 0
   \   000079   79..         MOV     R1,#?V0 + 4
   \   00007B   12....       LCALL   ?FLT_MUL
   \   00007E   90....       MOV     DPTR,#__Constant_39000000
   \   000081   78..         MOV     R0,#?V0 + 4
   \   000083   12....       LCALL   ?L_MOV_X
   \   000086   78..         MOV     R0,#?V0 + 0
   \   000088   79..         MOV     R1,#?V0 + 4
   \   00008A   12....       LCALL   ?FLT_MUL
    984              ADC_Channel_1_Vol_ForTx = (uint16)(ADC_Channel_1_Vol * 1000);                                  //将电压值乘以1000
   \   00008D   85....       MOV     ?V0 + 4,?V0 + 0
   \   000090   85....       MOV     ?V0 + 5,?V0 + 1
   \   000093   85....       MOV     ?V0 + 6,?V0 + 2
   \   000096   85....       MOV     ?V0 + 7,?V0 + 3
   \   000099   90....       MOV     DPTR,#__Constant_447a0000
   \   00009C   78..         MOV     R0,#?V0 + 8
   \   00009E   12....       LCALL   ?L_MOV_X
   \   0000A1   78..         MOV     R0,#?V0 + 4
   \   0000A3   79..         MOV     R1,#?V0 + 8
   \   0000A5   12....       LCALL   ?FLT_MUL
   \   0000A8   78..         MOV     R0,#?V0 + 4
   \   0000AA   12....       LCALL   ?FLT_TO_L
   \   0000AD   AE..         MOV     R6,?V0 + 4
    985              //Gas sensor获取数据,保存起来
    986              Channel_1_GasSenDataSave = (uint16)PointGetConcentrationForChannel_1(ADC_Channel_1_Vol,temp,humi);
   \   0000AF                ; Setup parameters for indirect call
   \   0000AF   85..82       MOV     DPL,?XSP + 0
   \   0000B2   85..83       MOV     DPH,?XSP + 1
   \   0000B5   E0           MOVX    A,@DPTR
   \   0000B6   F5..         MOV     ?V0 + 4,A
   \   0000B8   78..         MOV     R0,#?V0 + 4
   \   0000BA   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000BD   7402         MOV     A,#0x2
   \   0000BF   12....       LCALL   ?XSTACK_DISP0_8
   \   0000C2   E0           MOVX    A,@DPTR
   \   0000C3   F9           MOV     R1,A
   \   0000C4   AA..         MOV     R2,?V0 + 0
   \   0000C6   AB..         MOV     R3,?V0 + 1
   \   0000C8   AC..         MOV     R4,?V0 + 2
   \   0000CA   AD..         MOV     R5,?V0 + 3
   \   0000CC   90....       MOV     DPTR,#PointGetConcentrationForChannel_1
   \   0000CF   12....       LCALL   ?Subroutine22 & 0xFFFF
   \                     ??CrossCallReturnLabel_53:
   \   0000D2   12....       LCALL   ?CALL_IND
   \   0000D5   7401         MOV     A,#0x1
   \   0000D7   12....       LCALL   ?DEALLOC_XSTACK8
    987          
    988              Transmit_data[TxPackLength] = HI_UINT16(ADC_Channel_1_Vol_ForTx) , TxPackLength++;             //取处理后的电压的值高八位
   \   0000DA   7405         MOV     A,#0x5
   \   0000DC   12....       LCALL   ?XSTACK_DISP0_8
   \   0000DF   E5..         MOV     A,?V0 + 5
   \   0000E1   F0           MOVX    @DPTR,A
    989              Transmit_data[TxPackLength] = LO_UINT16(ADC_Channel_1_Vol_ForTx) , TxPackLength++;             //取处理后的电压值的低八位
   \   0000E2   7406         MOV     A,#0x6
   \   0000E4   12....       LCALL   ?XSTACK_DISP0_8
   \   0000E7   EE           MOV     A,R6
   \   0000E8   F0           MOVX    @DPTR,A
    990              Transmit_data[TxPackLength] = HI_UINT16(Channel_1_GasSenDataSave) , TxPackLength++;             //装入计算后的气体浓度高八位
   \   0000E9   7407         MOV     A,#0x7
   \   0000EB   12....       LCALL   ?XSTACK_DISP0_8
   \   0000EE   EB           MOV     A,R3
   \   0000EF   F0           MOVX    @DPTR,A
    991              Transmit_data[TxPackLength] = LO_UINT16(Channel_1_GasSenDataSave) , TxPackLength++;             //装入计算后的气体浓度低八位
   \   0000F0   7408         MOV     A,#0x8
   \   0000F2   12....       LCALL   ?XSTACK_DISP0_8
   \   0000F5   EA           MOV     A,R2
   \   0000F6   F0           MOVX    @DPTR,A
    992              Transmit_data[TxPackLength] = *GasSensorFlagForChannel_1, TxPackLength++;                       //装入标志位
   \   0000F7   90....       MOV     DPTR,#GasSensorFlagForChannel_1
   \   0000FA   12....       LCALL   ??Subroutine28_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_48:
   \   0000FD   C0E0         PUSH    A
   \   0000FF   7409         MOV     A,#0x9
   \   000101   12....       LCALL   ?XSTACK_DISP0_8
   \   000104   D0E0         POP     A
   \   000106   F0           MOVX    @DPTR,A
    993          #endif
    994          
    995              //将打包好的数据包发射出去
    996              if ( AF_DataRequest( &SampleApp_Flash_DstAddr, &SampleApp_epDesc,//点播设置的ID
    997                               SAMPLEAPP_GAS_SENSOR_CLUSTERID, //与接收方建立联系的参数，如1，表示由周期性广播方式发送过来的数据
    998                               14,                   //数据量（长度）
    999                               Transmit_data,                  //数据首地址
   1000                               &SampleApp_TransID,
   1001                               AF_DISCV_ROUTE,
   1002                               AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   000107                ; Setup parameters for call to function AF_DataRequest
   \   000107   75..1E       MOV     ?V0 + 0,#0x1e
   \   00010A   78..         MOV     R0,#?V0 + 0
   \   00010C   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00010F   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   000112   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   000115   78..         MOV     R0,#?V0 + 0
   \   000117   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00011A   7405         MOV     A,#0x5
   \   00011C   12....       LCALL   ?XSTACK_DISP0_8
   \   00011F   8582..       MOV     ?V0 + 0,DPL
   \   000122   8583..       MOV     ?V0 + 1,DPH
   \   000125   78..         MOV     R0,#?V0 + 0
   \   000127   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00012A   75..0E       MOV     ?V0 + 0,#0xe
   \   00012D   75..00       MOV     ?V0 + 1,#0x0
   \   000130   78..         MOV     R0,#?V0 + 0
   \   000132   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000135   75..06       MOV     ?V0 + 0,#0x6
   \   000138   78..         MOV     R0,#?V0 + 0
   \   00013A   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00013D   7920         MOV     R1,#0x20
   \   00013F   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   000141   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   000143   7A..         MOV     R2,#SampleApp_Flash_DstAddr & 0xff
   \   000145   7B..         MOV     R3,#(SampleApp_Flash_DstAddr >> 8) & 0xff
   \   000147   12....       LCALL   ??Subroutine31_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_66:
   \   00014A   12....       LCALL   ?DEALLOC_XSTACK8
   1003              {
   1004              }
   1005            /*
   1006            //节点2
   1007            Transmit_data[13]=2;//节点2标记
   1008            Transmit_data[0] = PM_data[0];
   1009            Transmit_data[1] = PM_data[1];
   1010            Transmit_data[2] = PM_data[2];
   1011            Transmit_data[3] = PM_data[3];
   1012            Transmit_data[4] = PM_data[4];
   1013            Transmit_data[5] = PM_data[5];
   1014            //将打包好的数据包发射出去
   1015              if ( AF_DataRequest( &SampleApp_Flash_DstAddr, &SampleApp_epDesc,//点播设置的ID
   1016                               SAMPLEAPP_GAS_SENSOR_CLUSTERID, //与接收方建立联系的参数，如1，表示由周期性广播方式发送过来的数据
   1017                               14,                   //数据量（长度）
   1018                               Transmit_data,                  //数据首地址
   1019                               &SampleApp_TransID,
   1020                               AF_DISCV_ROUTE,
   1021                               AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   1022              {
   1023              }*/
   1024          }
   \   00014D   7410         MOV     A,#0x10
   \   00014F   02....       LJMP    ?Subroutine1 & 0xFFFF

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for PointGetConcentrationForChan`:
   \   000000   ....         DW ??TGS813GetConcentration?relay

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for GasSensorFlagForChannel_1>`:
   \   000000   ....         DW TGS813GasSen_Flag

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_Init?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_Init

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_ProcessEvent?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_ProcessEvent

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??GetChannel1ADC?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    GetChannel1ADC

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??GetChannel2ADC?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    GetChannel2ADC

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_HandleKeys?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_HandleKeys

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_MessageMSGCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_MessageMSGCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_SendPointMessage?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_SendPointMessage

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_SendPeriodicMessage?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_SendPeriodicMessage

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_SendFlashMessage?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_SendFlashMessage

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleAPP_SendGasSensorMessage?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleAPP_SendGasSensorMessage

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Hello World\\n">`:
   \   000000   48656C6C     DB "Hello World\012"
   \            6F20576F
   \            726C640A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Group 1">`:
   \   000000   47726F75     DB "Group 1"
   \            70203100

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "P0.4:%.4fV">`:
   \   000000   50302E34     DB "P0.4:%.4fV"
   \            3A252E34
   \            665600  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\r\\n\\r\\n">`:
   \   000000   0D0A0D0A     DB "\015\012\015\012"
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "P0.0:%.4fV">`:
   \   000000   50302E30     DB "P0.0:%.4fV"
   \            3A252E34
   \            665600  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "GeneralFlag1:%d\\r\\n">`:
   \   000000   47656E65     DB "GeneralFlag1:%d\015\012"
   \            72616C46
   \            6C616731
   \            3A25640D
   \            0A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Transmit_data[%d]:%d\\r\\n">`:
   \   000000   5472616E     DB "Transmit_data[%d]:%d\015\012"
   \            736D6974
   \            5F646174
   \            615B2564
   \            5D3A2564
   \            0D0A00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "DHT11 Error!\\r\\n">`:
   \   000000   44485431     DB "DHT11 Error!\015\012"
   \            31204572
   \            726F7221
   \            0D0A00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "ShortAddr: ">`:
   \   000000   53686F72     DB "ShortAddr: "
   \            74416464
   \            723A2000

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "PanID: ">`:
   \   000000   50616E49     DB "PanID: "
   \            443A2000

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Rssi: ">`:
   \   000000   52737369     DB "Rssi: "
   \            3A2000  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Cmd.DataLength: ">`:
   \   000000   436D642E     DB "Cmd.DataLength: "
   \            44617461
   \            4C656E67
   \            74683A20
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Cmd.Data: ">`:
   \   000000   436D642E     DB "Cmd.Data: "
   \            44617461
   \            3A2000  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "The Node Message\\r\\n">`:
   \   000000   54686520     DB "The Node Message\015\012"
   \            4E6F6465
   \            204D6573
   \            73616765
   \            0D0A00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "0x%x\\r\\n">`:
   \   000000   30782578     DB "0x%x\015\012"
   \            0D0A00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "%ddBm\\r\\n">`:
   \   000000   25646442     DB "%ddBm\015\012"
   \            6D0D0A00

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "%d\\r\\n">`:
   \   000000   25640D0A     DB "%d\015\012"
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "I get data\\n">`:
   \   000000   49206765     DB "I get data\012"
   \            74206461
   \            74610A00

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\n">`:
   \   000000   0A00         DB "\012"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "TEMP\\243\\272%d C\\r\\n">`:
   \   000000   54454D50     DB "TEMP\243\272%d C\015\012"
   \            A3BA2564
   \            20430D0A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "HUMI\\243\\272%dRH\\r\\n">`:
   \   000000   48554D49     DB "HUMI\243\272%dRH\015\012"
   \            A3BA2564
   \            52480D0A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "vol1\\243\\272%.3fV\\r\\n">`:
   \   000000   766F6C31     DB "vol1\243\272%.3fV\015\012"
   \            A3BA252E
   \            3366560D
   \            0A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\r\\n">`:
   \   000000   0D0A00       DB "\015\012"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "PM2.5:">`:
   \   000000   504D322E     DB "PM2.5:"
   \            353A00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "ug/m3">`:
   \   000000   75672F6D     DB "ug/m3"
   \            3300    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "RSSI Testing.">`:
   \   000000   52535349     DB "RSSI Testing."
   \            20546573
   \            74696E67
   \            2E00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_4059999a:
   \   000000   9A995940     DD 4059999AH

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_39000000:
   \   000000   00000039     DD 39000000H

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_40533333:
   \   000000   33335340     DD 40533333H

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_447a0000:
   \   000000   00007A44     DD 447A0000H

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_4051eb85:
   \   000000   85EB5140     DD 4051EB85H
   1025          
   1026          /*********************************************************************
   1027          *********************************************************************/

   Maximum stack usage in bytes:

     Function                       ISTACK PSTACK XSTACK
     --------                       ------ ------ ------
     GetChannel1ADC                     0      0     45
       -> HalAdcRead                    0      0     82
       -> HalAdcRead                    0      0     82
       -> sprintf                       0      0     90
       -> strlen                        0      0     82
       -> HalUARTWrite                  0      0     82
       -> HalUARTWrite                  0      0     82
       -> Onboard_wait                  0      0     82
     GetChannel2ADC                     0      0     45
       -> HalAdcRead                    0      0     82
       -> HalAdcRead                    0      0     82
       -> sprintf                       0      0     90
       -> strlen                        0      0     82
       -> HalUARTWrite                  0      0     82
       -> HalUARTWrite                  0      0     82
       -> Onboard_wait                  0      0     82
     SampleAPP_SendGasSensorMessage     1      0     57
       -> dht11_value                   0      0     72
       -> HalAdcRead                    0      0     72
       -> HalAdcRead                    0      0     72
       -> AF_DataRequest                0      0     90
     SampleApp_HandleKeys               1      0     93
       -> dht11_value                   0      0    144
       -> HalAdcRead                    0      0    144
       -> HalAdcRead                    0      0    144
       -> sprintf                       0      0    152
       -> strlen                        0      0    144
       -> HalUARTWrite                  0      0    144
       -> HalUARTWrite                  0      0    144
       -> Onboard_wait                  0      0    144
       -> sprintf                       0      0    148
       -> strlen                        0      0    144
       -> HalUARTWrite                  0      0    144
       -> AF_DataRequest                0      0    162
       -> sprintf                       0      0    152
       -> Onboard_wait                  0      0    144
       -> strlen                        0      0    144
       -> HalUARTWrite                  0      0    144
       -> Onboard_wait                  0      0    144
       -> HalUARTWrite                  0      0    144
     SampleApp_Init                     0      0     14
       -> MT_UartInit                   0      0     22
       -> MT_UartRegisterTaskID         0      0     22
       -> HalUARTWrite                  0      0     22
       -> HalAdcInit                    0      0     22
       -> afRegister                    0      0     22
       -> RegisterForKeys               0      0     22
       -> osal_memcpy                   0      0     28
       -> aps_AddGroup                  0      0     22
     SampleApp_MessageMSGCB             2      0    127
       -> HalUARTWrite                  0      0    222
       -> HalUARTWrite                  0      0    222
       -> sprintf                       0      0    226
       -> strlen                        0      0    222
       -> HalUARTWrite                  0      0    222
       -> HalUARTWrite                  0      0    222
       -> sprintf                       0      0    226
       -> strlen                        0      0    222
       -> HalUARTWrite                  0      0    222
       -> HalUARTWrite                  0      0    222
       -> sprintf                       0      0    226
       -> strlen                        0      0    222
       -> HalUARTWrite                  0      0    222
       -> HalUARTWrite                  0      0    222
       -> sprintf                       0      0    226
       -> strlen                        0      0    222
       -> HalUARTWrite                  0      0    222
       -> HalUARTWrite                  0      0    222
       -> HalUARTWrite                  0      0    222
       -> HalUARTWrite                  0      0    222
       -> HalUARTWrite                  0      0    222
       -> HalUARTWrite                  0      0    222
       -> HalUARTWrite                  0      0    222
       -> HalLedBlink                   0      0    222
       -> HalUARTWrite                  0      0    222
       -> sprintf                       0      0    226
       -> strlen                        0      0    222
       -> HalUARTWrite                  0      0    222
       -> sprintf                       0      0    226
       -> strlen                        0      0    222
       -> HalUARTWrite                  0      0    222
       -> HalUARTWrite                  0      0    222
       -> sprintf                       0      0    230
       -> strlen                        0      0    222
       -> HalUARTWrite                  0      0    222
       -> HalUARTWrite                  0      0    222
       -> HalUARTWrite                  0      0    222
       -> HalUARTWrite                  0      0    222
       -> HalUARTWrite                  0      0    222
       -> HalUARTWrite                  0      0    222
     SampleApp_ProcessEvent             0      0     12
       -> osal_msg_receive              0      0     24
       -> osal_start_timerEx            0      0     24
       -> osal_msg_deallocate           0      0     24
       -> osal_msg_receive              0      0     24
       -> SampleApp_HandleKeys          0      0     24
       -> SampleApp_MessageMSGCB        0      0     24
       -> SampleAPP_SendGasSensorMessage
                                        0      0     24
       -> osal_rand                     0      0     24
       -> osal_start_timerEx            0      0     24
     SampleApp_SendFlashMessage         1      0     22
       -> AF_DataRequest                0      0     44
     SampleApp_SendPeriodicMessage      0      0     19
       -> AF_DataRequest                0      0     38
     SampleApp_SendPointMessage         2      0     33
       -> AF_DataRequest                0      0     66


   Segment part sizes:

     Function/Label                                 Bytes
     --------------                                 -----
     _A_P1                                             1
     contin                                            1
     SampleApp_ClusterList                             6
     SampleApp_SimpleDesc                             12
     SampleApp_epDesc                                  6
     SampleApp_TaskID                                  1
     SampleApp_NwkState                                1
     SampleApp_TransID                                 1
     SampleApp_Periodic_DstAddr                       12
     SampleApp_Flash_DstAddr                          12
     SampleApp_Point_To_Point_DstAddr
                                                      12
     SampleApp_Group                                  18
     SampleAppPeriodicCounter                          1
     SampleAppFlashCounter                             1
     PointGetConcentrationForChannel_1
                                                       2
     GasSensorFlagForChannel_1                         2
     SampleApp_Init                                  194
     SampleApp_ProcessEvent                          176
     GetChannel1ADC                                   71
     ?Subroutine0                                     31
     ??Subroutine24_0                                  8
     ?Subroutine10                                     4
     ??Subroutine25_0                                 15
     ?Subroutine9                                      4
     ??Subroutine26_0                                 25
     ?Subroutine21                                    12
     ?Subroutine16                                    10
     ?Subroutine3                                     30
     GetChannel2ADC                                   82
     SampleApp_HandleKeys                            458
     ?Subroutine1                                      8
     ?Subroutine19                                     6
     ??Subroutine27_0                                  6
     ?Subroutine13                                    10
     ?Subroutine18                                    10
     ??Subroutine31_0                                  6
     ?Subroutine7                                      9
     ?Subroutine6                                     13
     SampleApp_MessageMSGCB                          900
     ?Subroutine23                                     4
     ?Subroutine17                                     6
     ?Subroutine15                                    15
     ?Subroutine14                                    14
     ?Subroutine12                                    12
     ??Subroutine28_0                                  5
     ?Subroutine22                                     1
     ??Subroutine29_0                                  8
     ?Subroutine11                                     2
     ??Subroutine30_0                                 17
     ?Subroutine8                                      4
     ?Subroutine20                                    15
     ?Subroutine5                                      8
     ?Subroutine4                                     22
     SampleApp_SendPointMessage                       93
     ?Subroutine2                                      8
     SampleApp_SendPeriodicMessage                    66
     SampleApp_SendFlashMessage                      116
     SampleAPP_SendGasSensorMessage                  338
     ?<Initializer for PointGetConcentrationForChan    2
     ?<Initializer for GasSensorFlagForChannel_1>      2
     ??SampleApp_Init?relay                            6
     ??SampleApp_ProcessEvent?relay                    6
     ??GetChannel1ADC?relay                            6
     ??GetChannel2ADC?relay                            6
     ??SampleApp_HandleKeys?relay                      6
     ??SampleApp_MessageMSGCB?relay                    6
     ??SampleApp_SendPointMessage?relay                6
     ??SampleApp_SendPeriodicMessage?relay             6
     ??SampleApp_SendFlashMessage?relay                6
     ??SampleAPP_SendGasSensorMessage?relay            6
     ?<Constant "Hello World\n">                      13
     ?<Constant "Group 1">                             8
     ?<Constant "P0.4:%.4fV">                         11
     ?<Constant "\r\n\r\n">                            5
     ?<Constant "P0.0:%.4fV">                         11
     ?<Constant "GeneralFlag1:%d\r\n">                18
     ?<Constant "Transmit_data[%d]:%d\r\n">           23
     ?<Constant "DHT11 Error!\r\n">                   15
     ?<Constant "ShortAddr: ">                        12
     ?<Constant "PanID: ">                             8
     ?<Constant "Rssi: ">                              7
     ?<Constant "Cmd.DataLength: ">                   17
     ?<Constant "Cmd.Data: ">                         11
     ?<Constant "The Node Message\r\n">               19
     ?<Constant "0x%x\r\n">                            7
     ?<Constant "%ddBm\r\n">                           8
     ?<Constant "%d\r\n">                              5
     ?<Constant "I get data\n">                       12
     ?<Constant "\n">                                  2
     ?<Constant "TEMP\243\272%d C\r\n">               13
     ?<Constant "HUMI\243\272%dRH\r\n">               13
     ?<Constant "vol1\243\272%.3fV\r\n">              14
     ?<Constant "\r\n">                                3
     ?<Constant "PM2.5:">                              7
     ?<Constant "ug/m3">                               6
     ?<Constant "RSSI Testing.">                      14
     __Constant_4059999a                               4
     __Constant_39000000                               4
     __Constant_40533333                               4
     __Constant_447a0000                               4
     __Constant_4051eb85                               4

 
 2 842 bytes in segment BANKED_CODE
    60 bytes in segment BANK_RELAYS
     1 byte  in segment SFR_AN
     4 bytes in segment XDATA_I
     4 bytes in segment XDATA_ID
   320 bytes in segment XDATA_ROM_C
    66 bytes in segment XDATA_Z
 
 2 906 bytes of CODE  memory
   300 bytes of CONST memory (+ 20 bytes shared)
     0 bytes of DATA  memory (+  1 byte  shared)
    70 bytes of XDATA memory

Errors: none
Warnings: 23
